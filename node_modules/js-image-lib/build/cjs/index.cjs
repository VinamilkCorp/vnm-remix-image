"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t={0:{66:{77:"image/bmp"},71:{73:{70:"image/gif"}},73:{73:{42:{0:"image/tiff"}}},77:{77:{0:{42:"image/tiff"}}},137:{80:{78:{71:{13:{10:{26:{10:"image/png"}}}}}}},255:{216:{255:"image/jpeg"}}},4:{102:{116:{121:{112:{97:{118:{105:{102:"image/avif",115:"image/avif"}}}}}}}},8:{87:{69:{66:{80:"image/webp"}}}}},e=[0,4,8];var r;!function(t){t.SVG="image/svg+xml",t.JPEG="image/jpeg",t.PNG="image/png",t.GIF="image/gif",t.WEBP="image/webp",t.BMP="image/bmp",t.TIFF="image/tiff",t.AVIF="image/avif"}(r||(r={}));const i=r=>{if(!r||r.byteLength<3)throw new Error("Buffer is not a valid image!");for(const i of e){let e=t[i];for(let t=i;t<=12;t+=1){const i=r[t];if("object"!=typeof e)return e;if(!Object.prototype.hasOwnProperty.call(e,i))break;e=e[i]}}throw new Error("Buffer is not a supported image type!")};var n;exports.MimeType=void 0,(n=exports.MimeType||(exports.MimeType={})).SVG="image/svg+xml",n.JPEG="image/jpeg",n.PNG="image/png",n.GIF="image/gif",n.WEBP="image/webp",n.BMP="image/bmp",n.TIFF="image/tiff",n.AVIF="image/avif";var a;!function(t){t[t.BITMAP_INFO_HEADER=40]="BITMAP_INFO_HEADER",t[t.BITMAP_V2_INFO_HEADER=52]="BITMAP_V2_INFO_HEADER",t[t.BITMAP_V3_INFO_HEADER=56]="BITMAP_V3_INFO_HEADER",t[t.BITMAP_V4_HEADER=108]="BITMAP_V4_HEADER",t[t.BITMAP_V5_HEADER=124]="BITMAP_V5_HEADER"}(a||(a={}));var s,o=a;class h{constructor(t,{toRGBA:e}={toRGBA:!1}){if(this.buffer=t,this.bufferView=new DataView(t.buffer,t.byteOffset,t.byteLength),this.toRGBA=!!e,this.bottomUp=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos=2,"BM"!==this.flag)throw new Error("Invalid BMP File");this.locRed=this.toRGBA?0:3,this.locGreen=this.toRGBA?1:2,this.locBlue=this.toRGBA?2:1,this.locAlpha=this.toRGBA?3:0,this.parseHeader(),this.parseRGBA()}parseHeader(){if(this.fileSize=this.readUInt32LE(),this.reserved1=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.reserved2=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.offset=this.readUInt32LE(),this.headerSize=this.readUInt32LE(),!(this.headerSize in o))throw new Error(`Unsupported BMP header size ${this.headerSize}`);if(this.width=this.readUInt32LE(),this.height=this.readUInt32LE(),this.planes=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.compression=this.readUInt32LE(),this.rawSize=this.readUInt32LE(),this.hr=this.readUInt32LE(),this.vr=this.readUInt32LE(),this.colors=this.readUInt32LE(),this.importantColors=this.readUInt32LE(),32===this.bitPP?(this.maskAlpha=0,this.maskRed=16711680,this.maskGreen=65280,this.maskBlue=255):16===this.bitPP&&(this.maskAlpha=0,this.maskRed=31744,this.maskGreen=992,this.maskBlue=31),(this.headerSize>o.BITMAP_INFO_HEADER||3===this.compression||6===this.compression)&&(this.maskRed=this.readUInt32LE(),this.maskGreen=this.readUInt32LE(),this.maskBlue=this.readUInt32LE()),(this.headerSize>o.BITMAP_V2_INFO_HEADER||6===this.compression)&&(this.maskAlpha=this.readUInt32LE()),this.headerSize>o.BITMAP_V3_INFO_HEADER&&(this.pos+=o.BITMAP_V4_HEADER-o.BITMAP_V3_INFO_HEADER),this.headerSize>o.BITMAP_V4_HEADER&&(this.pos+=o.BITMAP_V5_HEADER-o.BITMAP_V4_HEADER),this.bitPP<=8||this.colors>0){const t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(let e=0;e<t;e++){const t=this.buffer[this.pos++],r=this.buffer[this.pos++],i=this.buffer[this.pos++],n=this.buffer[this.pos++];this.palette[e]={red:i,green:r,blue:t,quad:n}}}this.height<0&&(this.height*=-1,this.bottomUp=!1);const t=function(t,e,r,i){const n=1+~t&t,a=1+~e&e,s=1+~r&r,o=1+~i&i,h=t/n+1,f=e/a+1,l=r/s+1,d=i/o+1;return{shiftRed:e=>(e&t)/n*256/h,shiftGreen:t=>(t&e)/a*256/f,shiftBlue:t=>(t&r)/s*256/l,shiftAlpha:0!==i?t=>(t&i)/o*256/d:()=>255}}(this.maskRed,this.maskGreen,this.maskBlue,this.maskAlpha);this.shiftRed=t.shiftRed,this.shiftGreen=t.shiftGreen,this.shiftBlue=t.shiftBlue,this.shiftAlpha=t.shiftAlpha}parseRGBA(){switch(this.data=new Uint8Array(this.width*this.height*4),this.bitPP){case 1:this.bit1();break;case 4:this.bit4();break;case 8:this.bit8();break;case 16:this.bit16();break;case 24:this.bit24();break;default:this.bit32()}}bit1(){const t=Math.ceil(this.width/8),e=t%4,r=0!==e?4-e:0;this.scanImage(r,t,((t,e)=>{const r=this.buffer[this.pos++],i=e*this.width*4+8*t*4;for(let e=0;e<8&&8*t+e<this.width;e++){const t=this.palette[r>>7-e&1];this.data[i+e*this.locAlpha]=0,this.data[i+4*e+this.locBlue]=t.blue,this.data[i+4*e+this.locGreen]=t.green,this.data[i+4*e+this.locRed]=t.red}}))}bit4(){if(2===this.compression){this.data.fill(0);let t=!1,e=this.bottomUp?this.height-1:0,r=0;for(;r<this.data.length;){const i=this.buffer[this.pos++],n=this.buffer[this.pos++];if(0===i){if(0===n){e+=this.bottomUp?-1:1,r=e*this.width*4,t=!1;continue}if(1===n)break;if(2===n){const t=this.buffer[this.pos++],i=this.buffer[this.pos++];e+=this.bottomUp?-i:i,r+=i*this.width*4+4*t}else{let e=this.buffer[this.pos++];for(let i=0;i<n;i++)r=this.setPixelData(r,t?15&e:(240&e)>>4),1&i&&i+1<n&&(e=this.buffer[this.pos++]),t=!t;1==(n+1>>1&1)&&this.pos++}}else for(let e=0;e<i;e++)r=this.setPixelData(r,t?15&n:(240&n)>>4),t=!t}}else{const t=Math.ceil(this.width/2),e=t%4,r=0!==e?4-e:0;this.scanImage(r,t,((t,e)=>{const r=this.buffer[this.pos++],i=e*this.width*4+2*t*4,n=r>>4;let a=this.palette[n];if(this.data[i]=0,this.data[i+1]=a.blue,this.data[i+2]=a.green,this.data[i+3]=a.red,2*t+1>=this.width)return!1;const s=15&r;a=this.palette[s],this.data[i+4]=0,this.data[i+4+1]=a.blue,this.data[i+4+2]=a.green,this.data[i+4+3]=a.red}))}}bit8(){if(1===this.compression){this.data.fill(0);let t=this.bottomUp?this.height-1:0,e=0;for(;e<this.data.length;){const r=this.buffer[this.pos++],i=this.buffer[this.pos++];if(0===r){if(0===i){t+=this.bottomUp?-1:1,e=t*this.width*4;continue}if(1===i)break;if(2===i){const r=this.buffer[this.pos++],i=this.buffer[this.pos++];t+=this.bottomUp?-i:i,e+=i*this.width*4+4*r}else{for(let t=0;t<i;t++){const t=this.buffer[this.pos++];e=this.setPixelData(e,t)}!0&i&&this.pos++}}else for(let t=0;t<r;t++)e=this.setPixelData(e,i)}}else{const t=this.width%4,e=0!==t?4-t:0;this.scanImage(e,this.width,((t,e)=>{const r=this.buffer[this.pos++],i=e*this.width*4+4*t;if(r<this.palette.length){const t=this.palette[r];this.data[i]=0,this.data[i+1]=t.blue,this.data[i+2]=t.green,this.data[i+3]=t.red}else this.data[i]=0,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}))}}bit16(){const t=this.width%2*2;this.scanImage(t,this.width,((t,e)=>{const r=e*this.width*4+4*t,i=this.bufferView.getUint16(this.pos,!0);this.pos+=2,this.data[r+this.locRed]=this.shiftRed(i),this.data[r+this.locGreen]=this.shiftGreen(i),this.data[r+this.locBlue]=this.shiftBlue(i),this.data[r+this.locAlpha]=this.shiftAlpha(i)}))}bit24(){const t=this.width%4;this.scanImage(t,this.width,((t,e)=>{const r=e*this.width*4+4*t,i=this.buffer[this.pos++],n=this.buffer[this.pos++],a=this.buffer[this.pos++];this.data[r+this.locRed]=a,this.data[r+this.locGreen]=n,this.data[r+this.locBlue]=i,this.data[r+this.locAlpha]=0}))}bit32(){this.scanImage(0,this.width,((t,e)=>{const r=e*this.width*4+4*t,i=this.readUInt32LE();this.data[r+this.locRed]=this.shiftRed(i),this.data[r+this.locGreen]=this.shiftGreen(i),this.data[r+this.locBlue]=this.shiftBlue(i),this.data[r+this.locAlpha]=this.shiftAlpha(i)}))}scanImage(t=0,e=this.width,r){for(let i=this.height-1;i>=0;i--){const n=this.bottomUp?i:this.height-1-i;for(let t=0;t<e;t++)r.call(this,t,n);this.pos+=t}}readUInt32LE(){const t=this.bufferView.getUint32(this.pos,!0);return this.pos+=4,t}setPixelData(t,e){const{blue:r,green:i,red:n}=this.palette[e];return this.data[t+this.locAlpha]=0,this.data[t+1+this.locBlue]=r,this.data[t+2+this.locGreen]=i,this.data[t+3+this.locRed]=n,t+4}}function f(t){return t.reduce(((t,e)=>t<<1|e),0)}function l(t){return t.quad<<24|t.red<<16|t.green<<8|t.blue}class d{constructor(t){switch(this.buffer=t.data,this.width=t.width,this.height=t.height,this.headerSize=o.BITMAP_INFO_HEADER,this.flag="BM",this.bitPP=t.bitPP,this.offset=54,this.reserved1=t.reserved1||0,this.reserved2=t.reserved2||0,this.planes=1,this.compress=0,this.hr=t.hr||0,this.vr=t.vr||0,this.importantColors=t.importantColors||0,this.colors=Math.min(Math.pow(2,this.bitPP-1||1),t.colors||1/0),this.palette=t.palette||[],this.colors&&this.bitPP<16?this.offset+=4*this.colors:this.colors=0,this.bitPP){case 32:this.bytesInColor=4;break;case 16:this.bytesInColor=2;break;case 8:this.bytesInColor=1;break;case 4:this.bytesInColor=.5;break;case 1:this.bytesInColor=1/8;break;default:this.bytesInColor=3,this.bitPP=24}const e=this.width*this.bitPP/32,r=Math.ceil(e);this.extraBytes=4*(r-e),this.rawSize=this.height*r*4+2,this.fileSize=this.rawSize+this.offset,this.data=new Uint8Array(this.fileSize),this.dataView=new DataView(this.data.buffer),this.data.fill(1),this.pos=0,this.encode()}encode(){switch(this.pos=0,this.writeHeader(),this.bitPP){case 32:this.bit32();break;case 16:this.bit16();break;case 8:this.bit8();break;case 4:this.bit4();break;case 1:this.bit1();break;default:this.bit24()}}writeHeader(){this.data[this.pos++]=this.flag.charCodeAt(0),this.data[this.pos++]=this.flag.charCodeAt(1),this.writeUInt32LE(this.fileSize),this.writeUInt32LE(this.reserved1<<16|this.reserved2),this.writeUInt32LE(this.offset),this.writeUInt32LE(this.headerSize),this.writeUInt32LE(this.width),this.writeUInt32LE(this.height),this.dataView.setUint16(this.pos,this.planes,!0),this.pos+=2,this.dataView.setUint16(this.pos,this.bitPP,!0),this.pos+=2,this.writeUInt32LE(this.compress),this.writeUInt32LE(this.rawSize),this.writeUInt32LE(this.hr),this.writeUInt32LE(this.vr),this.writeUInt32LE(this.colors),this.writeUInt32LE(this.importantColors)}bit1(){this.palette.length&&2===this.colors?this.initColors(1):(this.writeUInt32LE(16777215),this.writeUInt32LE(0)),this.pos+=1;let t=[];this.writeImage(((e,r,i)=>{let n=r;n++;const a=this.buffer[n++],s=this.buffer[n++],o=.2126*this.buffer[n++]+.7152*s+.0722*a;return t.push(o>127?0:1),(i+1)%8==0?(this.data[e-1]=f(t),t=[]):i===this.width-1&&t.length>0&&(this.data[e-1]=f(t)<<4,t=[]),n}))}bit4(){const t=this.initColors(4);let e=[];this.writeImage(((r,i,n)=>{let a=i;const s=l({quad:this.buffer[a++],blue:this.buffer[a++],green:this.buffer[a++],red:this.buffer[a++]}),o=t.findIndex((t=>t===s));return-1!==o?e.push(o):e.push(0),(n+1)%2==0&&(this.data[r]=e[0]<<4|e[1],e=[]),a}))}bit8(){const t=this.initColors(8);this.writeImage(((e,r)=>{let i=r;const n=l({quad:this.buffer[i++],blue:this.buffer[i++],green:this.buffer[i++],red:this.buffer[i++]}),a=t.findIndex((t=>t===n));return this.data[e]=-1!==a?a:0,i}))}bit16(){this.writeImage(((t,e)=>{let r=e+1;const i=this.buffer[r++]/8,n=this.buffer[r++]/8,a=this.buffer[r++]/8<<10|n<<5|i;return this.data[t]=255&a,this.data[t+1]=(65280&a)>>8,r}))}bit24(){this.writeImage(((t,e)=>{let r=e+1;return this.data[t]=this.buffer[r++],this.data[t+1]=this.buffer[r++],this.data[t+2]=this.buffer[r++],r}))}bit32(){this.writeImage(((t,e)=>{let r=e;return this.data[t+3]=this.buffer[r++],this.data[t]=this.buffer[r++],this.data[t+1]=this.buffer[r++],this.data[t+2]=this.buffer[r++],r}))}writeImage(t){const e=this.extraBytes+this.width*this.bytesInColor;let r=0;for(let i=0;i<this.height;i++)for(let n=0;n<this.width;n++){const a=Math.floor(this.pos+(this.height-1-i)*e+n*this.bytesInColor);r=t.call(this,a,r,n,i)}}initColors(t){const e=[];if(!this.palette.length)throw new Error(`To encode ${t}-bit BMPs a pallette is needed. Please choose up to ${this.colors} colors. Colors must be 32-bit integers.`);for(let t=0;t<this.colors;t++){const r=l(this.palette[t]);this.writeUInt32LE(r),e.push(r)}return e}writeUInt32LE(t){this.dataView.setUint32(this.pos,t,!0),this.pos+=4}}!function(t){t[t.NONE=0]="NONE",t[t.BI_RLE8=1]="BI_RLE8",t[t.BI_RLE4=2]="BI_RLE4",t[t.BI_BIT_FIELDS=3]="BI_BIT_FIELDS",t[t.BI_ALPHA_BIT_FIELDS=6]="BI_ALPHA_BIT_FIELDS"}(s||(s={}));var u=(t,e)=>new h(t,e),c=t=>new d(t);const p=t=>{const e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i+=4)r[i]=t[i+3],r[i+1]=t[i+2],r[i+2]=t[i+1],r[i+3]=t[i];return r},g={decode(t){const e=u(t,{toRGBA:!0});return{width:e.width,height:e.height,data:e.data}},encode:t=>c({bitPP:32,width:t.width,height:t.height,data:p(t.data)}).data};var w,_,v={};function b(t,e,r,i){for(var n=t[e++],a=1<<n,s=a+1,o=s+1,h=n+1,f=(1<<h)-1,l=0,d=0,u=0,c=t[e++],p=new Int32Array(4096),g=null;;){for(;l<16&&0!==c;)d|=t[e++]<<l,l+=8,1===c?c=t[e++]:--c;if(l<h)break;var w=d&f;if(d>>=h,l-=h,w!==a){if(w===s)break;for(var _=w<o?w:g,v=0,b=_;b>a;)b=p[b]>>8,++v;var m=b;if(u+v+(_!==w?1:0)>i)return void console.log("Warning, gif stream longer than expected.");r[u++]=m;var y=u+=v;for(_!==w&&(r[u++]=m),b=_;v--;)b=p[b],r[--y]=255&b,b>>=8;null!==g&&o<4096&&(p[o++]=g<<8|m,o>=f+1&&h<12&&(++h,f=f<<1|1)),g=w}else o=s+1,f=(1<<(h=n+1))-1,g=null}return u!==i&&console.log("Warning, gif stream shorter than expected."),r}try{_=v.GifWriter=function(t,e,r,i){var n=0,a=void 0===(i=void 0===i?{}:i).loop?null:i.loop,s=void 0===i.palette?null:i.palette;if(e<=0||r<=0||e>65535||r>65535)throw new Error("Width/Height invalid.");function o(t){var e=t.length;if(e<2||e>256||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}t[n++]=71,t[n++]=73,t[n++]=70,t[n++]=56,t[n++]=57,t[n++]=97;var h=0,f=0;if(null!==s){for(var l=o(s);l>>=1;)++h;if(l=1<<h,--h,void 0!==i.background){if((f=i.background)>=l)throw new Error("Background index out of range.");if(0===f)throw new Error("Background index explicitly passed as 0.")}}if(t[n++]=255&e,t[n++]=e>>8&255,t[n++]=255&r,t[n++]=r>>8&255,t[n++]=(null!==s?128:0)|h,t[n++]=f,t[n++]=0,null!==s)for(var d=0,u=s.length;d<u;++d){var c=s[d];t[n++]=c>>16&255,t[n++]=c>>8&255,t[n++]=255&c}if(null!==a){if(a<0||a>65535)throw new Error("Loop count invalid.");t[n++]=33,t[n++]=255,t[n++]=11,t[n++]=78,t[n++]=69,t[n++]=84,t[n++]=83,t[n++]=67,t[n++]=65,t[n++]=80,t[n++]=69,t[n++]=50,t[n++]=46,t[n++]=48,t[n++]=3,t[n++]=1,t[n++]=255&a,t[n++]=a>>8&255,t[n++]=0}var p=!1;this.addFrame=function(e,r,i,a,h,f){if(!0===p&&(--n,p=!1),f=void 0===f?{}:f,e<0||r<0||e>65535||r>65535)throw new Error("x/y invalid.");if(i<=0||a<=0||i>65535||a>65535)throw new Error("Width/Height invalid.");if(h.length<i*a)throw new Error("Not enough pixels for the frame size.");var l=!0,d=f.palette;if(null==d&&(l=!1,d=s),null==d)throw new Error("Must supply either a local or global palette.");for(var u=o(d),c=0;u>>=1;)++c;u=1<<c;var g=void 0===f.delay?0:f.delay,w=void 0===f.disposal?0:f.disposal;if(w<0||w>3)throw new Error("Disposal out of range.");var _=!1,v=0;if(void 0!==f.transparent&&null!==f.transparent&&(_=!0,(v=f.transparent)<0||v>=u))throw new Error("Transparent color index.");if((0!==w||_||0!==g)&&(t[n++]=33,t[n++]=249,t[n++]=4,t[n++]=w<<2|(!0===_?1:0),t[n++]=255&g,t[n++]=g>>8&255,t[n++]=v,t[n++]=0),t[n++]=44,t[n++]=255&e,t[n++]=e>>8&255,t[n++]=255&r,t[n++]=r>>8&255,t[n++]=255&i,t[n++]=i>>8&255,t[n++]=255&a,t[n++]=a>>8&255,t[n++]=!0===l?128|c-1:0,!0===l)for(var b=0,m=d.length;b<m;++b){var y=d[b];t[n++]=y>>16&255,t[n++]=y>>8&255,t[n++]=255&y}return n=function(t,e,r,i){t[e++]=r;var n=e++,a=1<<r,s=a-1,o=a+1,h=o+1,f=r+1,l=0,d=0;function u(r){for(;l>=r;)t[e++]=255&d,d>>=8,l-=8,e===n+256&&(t[n]=255,n=e++)}function c(t){d|=t<<l,l+=f,u(8)}var p=i[0]&s,g={};c(a);for(var w=1,_=i.length;w<_;++w){var v=i[w]&s,b=p<<8|v,m=g[b];if(void 0===m){for(d|=p<<l,l+=f;l>=8;)t[e++]=255&d,d>>=8,l-=8,e===n+256&&(t[n]=255,n=e++);4096===h?(c(a),h=o+1,f=r+1,g={}):(h>=1<<f&&++f,g[b]=h++),p=v}else p=m}return c(p),c(o),u(1),n+1===e?t[n]=0:(t[n]=e-n-1,t[e++]=0),e}(t,n,c<2?2:c,h),n},this.end=function(){return!1===p&&(t[n++]=59,p=!0),n},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(e){t=e},this.getOutputBufferPosition=function(){return n},this.setOutputBufferPosition=function(t){n=t}},w=v.GifReader=function(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,n=t[e++],a=n>>7,s=1<<1+(7&n);t[e++],t[e++];var o=null,h=null;a&&(o=e,h=s,e+=3*s);var f=!0,l=[],d=0,u=null,c=0,p=null;for(this.width=r,this.height=i;f&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(0===U)break;e+=U}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var g=t[e++];d=t[e++]|t[e++]<<8,u=t[e++],0==(1&g)&&(u=null),c=g>>2&7,e++;break;case 254:for(;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(0===U)break;e+=U}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,y=t[e++],k=y>>6&1,x=1<<1+(7&y),A=o,E=h,I=!1;y>>7&&(I=!0,A=e,E=x,e+=3*x);var z=e;for(e++;;){var U;if(!((U=t[e++])>=0))throw Error("Invalid block size");if(0===U)break;e+=U}l.push({x:w,y:_,width:v,height:m,has_local_palette:I,palette_offset:A,palette_size:E,data_offset:z,data_length:e-z,transparent_index:u,interlaced:!!k,delay:d,disposal:c});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return p},this.frameInfo=function(t){if(t<0||t>=l.length)throw new Error("Frame index out of range.");return l[t]},this.decodeAndBlitFrameBGRA=function(e,i){var n=this.frameInfo(e),a=n.width*n.height,s=new Uint8Array(a);b(t,n.data_offset,s,a);var o=n.palette_offset,h=n.transparent_index;null===h&&(h=256);var f=n.width,l=r-f,d=f,u=4*(n.y*r+n.x),c=4*((n.y+n.height)*r+n.x),p=u,g=4*l;!0===n.interlaced&&(g+=4*r*7);for(var w=8,_=0,v=s.length;_<v;++_){var m=s[_];if(0===d&&(d=f,(p+=g)>=c&&(g=4*l+4*r*(w-1),p=u+(f+l)*(w<<1),w>>=1)),m===h)p+=4;else{var y=t[o+3*m],k=t[o+3*m+1],x=t[o+3*m+2];i[p++]=x,i[p++]=k,i[p++]=y,i[p++]=255}--d}},this.decodeAndBlitFrameRGBA=function(e,i){var n=this.frameInfo(e),a=n.width*n.height,s=new Uint8Array(a);b(t,n.data_offset,s,a);var o=n.palette_offset,h=n.transparent_index;null===h&&(h=256);var f=n.width,l=r-f,d=f,u=4*(n.y*r+n.x),c=4*((n.y+n.height)*r+n.x),p=u,g=4*l;!0===n.interlaced&&(g+=4*r*7);for(var w=8,_=0,v=s.length;_<v;++_){var m=s[_];if(0===d&&(d=f,(p+=g)>=c&&(g=4*l+4*r*(w-1),p=u+(f+l)*(w<<1),w>>=1)),m===h)p+=4;else{var y=t[o+3*m],k=t[o+3*m+1],x=t[o+3*m+2];i[p++]=y,i[p++]=k,i[p++]=x,i[p++]=255}--d}}}}catch(t){}var m={exports:{}};if(!y)var y={map:function(t,e){var r={};return e?t.map((function(t,i){return r.index=i,e.call(r,t)})):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var r={};return t.reduce(e?function(t,i,n){return r.index=n,t+e.call(r,i)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?y.map(t,e):t)}};var k=function(){function t(t,e,r){return(t<<10)+(e<<5)+r}function e(t){var e=[],r=!1;function i(){e.sort(t),r=!0}return{push:function(t){e.push(t),r=!1},peek:function(t){return r||i(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return r||i(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return r||i(),e}}}function r(t,e,r,i,n,a,s){var o=this;o.r1=t,o.r2=e,o.g1=r,o.g2=i,o.b1=n,o.b2=a,o.histo=s}function i(){this.vboxes=new e((function(t,e){return y.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function n(e,r){if(r.count()){var i=r.r2-r.r1+1,n=r.g2-r.g1+1,a=r.b2-r.b1+1,s=y.max([i,n,a]);if(1==r.count())return[r.copy()];var o,h,f,l,d=0,u=[],c=[];if(s==i)for(o=r.r1;o<=r.r2;o++){for(l=0,h=r.g1;h<=r.g2;h++)for(f=r.b1;f<=r.b2;f++)l+=e[t(o,h,f)]||0;d+=l,u[o]=d}else if(s==n)for(o=r.g1;o<=r.g2;o++){for(l=0,h=r.r1;h<=r.r2;h++)for(f=r.b1;f<=r.b2;f++)l+=e[t(h,o,f)]||0;d+=l,u[o]=d}else for(o=r.b1;o<=r.b2;o++){for(l=0,h=r.r1;h<=r.r2;h++)for(f=r.g1;f<=r.g2;f++)l+=e[t(h,f,o)]||0;d+=l,u[o]=d}return u.forEach((function(t,e){c[e]=d-t})),p(s==i?"r":s==n?"g":"b")}function p(t){var e,i,n,a,s,h=t+"1",f=t+"2",l=0;for(o=r[h];o<=r[f];o++)if(u[o]>d/2){for(n=r.copy(),a=r.copy(),s=(e=o-r[h])<=(i=r[f]-o)?Math.min(r[f]-1,~~(o+i/2)):Math.max(r[h],~~(o-1-e/2));!u[s];)s++;for(l=c[s];!l&&u[s-1];)l=c[--s];return n[f]=s,a[h]=n[f]+1,[n,a]}}}return r.prototype={volume:function(t){var e=this;return e._volume&&!t||(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(e){var r=this,i=r.histo;if(!r._count_set||e){var n,a,s,o=0;for(n=r.r1;n<=r.r2;n++)for(a=r.g1;a<=r.g2;a++)for(s=r.b1;s<=r.b2;s++)o+=i[t(n,a,s)]||0;r._count=o,r._count_set=!0}return r._count},copy:function(){var t=this;return new r(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var r=this,i=r.histo;if(!r._avg||e){var n,a,s,o,h=0,f=0,l=0,d=0;for(a=r.r1;a<=r.r2;a++)for(s=r.g1;s<=r.g2;s++)for(o=r.b1;o<=r.b2;o++)h+=n=i[t(a,s,o)]||0,f+=n*(a+.5)*8,l+=n*(s+.5)*8,d+=n*(o+.5)*8;r._avg=h?[~~(f/h),~~(l/h),~~(d/h)]:[~~(8*(r.r1+r.r2+1)/2),~~(8*(r.g1+r.g2+1)/2),~~(8*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(t){var e=this,r=t[0]>>3;return gval=t[1]>>3,bval=t[2]>>3,r>=e.r1&&r<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},i.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,r=0;r<e.size();r++)if(e.peek(r).vbox.contains(t))return e.peek(r).color;return this.nearest(t)},nearest:function(t){for(var e,r,i,n=this.vboxes,a=0;a<n.size();a++)((r=Math.sqrt(Math.pow(t[0]-n.peek(a).color[0],2)+Math.pow(t[1]-n.peek(a).color[1],2)+Math.pow(t[2]-n.peek(a).color[2],2)))<e||void 0===e)&&(e=r,i=n.peek(a).color);return i},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return y.naturalOrder(y.sum(t.color),y.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var r=t.length-1,i=t[r].color;i[0]>251&&i[1]>251&&i[2]>251&&(t[r].color=[255,255,255])}},{quantize:function(a,s){if(!a.length||s<2||s>256)return!1;var o=function(e){var r,i,n,a,s=new Array(32768);return e.forEach((function(e){i=e[0]>>3,n=e[1]>>3,a=e[2]>>3,r=t(i,n,a),s[r]=(s[r]||0)+1})),s}(a);o.forEach((function(){}));var h=function(t,e){var i,n,a,s=1e6,o=0,h=1e6,f=0,l=1e6,d=0;return t.forEach((function(t){i=t[0]>>3,n=t[1]>>3,a=t[2]>>3,i<s?s=i:i>o&&(o=i),n<h?h=n:n>f&&(f=n),a<l?l=a:a>d&&(d=a)})),new r(s,o,h,f,l,d,e)}(a,o),f=new e((function(t,e){return y.naturalOrder(t.count(),e.count())}));function l(t,e){for(var r,i=1,a=0;a<1e3;)if((r=t.pop()).count()){var s=n(o,r),h=s[0],f=s[1];if(!h)return;if(t.push(h),f&&(t.push(f),i++),i>=e)return;if(a++>1e3)return}else t.push(r),a++}f.push(h),l(f,.75*s);for(var d=new e((function(t,e){return y.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));f.size();)d.push(f.pop());l(d,s-d.size());for(var u=new i;d.size();)u.push(d.pop());return u}}}(),x=k.quantize;function A(t,e){return t[e+3]>=127}function E(t,e,r,i){if(e="number"==typeof e?0|e:5,i="function"==typeof i?i:A,(r="number"==typeof r?0|r:10)<=0)throw new Error("quality must be > 0");for(var n=[],a=4*r,s=0,o=t.length;s<o;s+=a){var h=t[s+0],f=t[s+1],l=t[s+2];i(t,s,t)&&n.push([h,f,l])}var d=x(n,Math.max(2,e)).vboxes;return d?d.map((function(t){return t})).slice(0,e):[]}m.exports=function(t,e,r,i){return E(t,e,r,i).map((function(t){return t.color}))},m.exports.bins=function(t,e,r,i){var n=E(t,e,r,i),a=(n=n.map((function(t){return{color:t.color,size:t.vbox.count()*t.vbox.volume(),amount:0}}))).reduce((function(t,e){return t+e.size}),0);return n.forEach((function(t){t.amount=t.size/a})),n};var I=m.exports;const z=(t,e,r)=>(t<<16)+(e<<8)+r,U=(t,e)=>{const r=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)));let i=I(t,e).map((t=>[t[0],t[1],t[2],255]));if(0===i.length&&(i=I(t,e,10,(()=>!0)).map((t=>[t[0],t[1],t[2],255]))),i.length<r){const t=i.length>0?i[i.length-1]:[0,0,0,0],e=i.length;i.length=r,i.fill(t,e,r)}i[i.length-1]=[0,0,0,0];for(let t=0;t<i.length;t+=1)for(let e=0;e<4;e+=1){const r=i[t][e];null==r||Number.isNaN(r)||r<0?i[t][e]=0:r>255&&(i[t][e]=255)}return i},B=(t,e)=>{const r=new Array(t.length/4),i=new Map;e.forEach(((t,e)=>i.set(t,e)));for(let n=0;n<t.length;n+=4){const a=[t[n],t[n+1],t[n+2],t[n+3]];if(i.has(a))r[n/4]=i.get(a);else{let t=1e3,s=0;e.map(((e,r)=>{const i=Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2)+Math.pow(a[3]-e[3],2));i<t&&(t=i,s=r)})),i.set(a,s),r[n/4]=s}}return r},P={decode(t){const e=new w(t),r={width:e.width,height:e.height,data:new Uint8Array(e.width*e.height*4)};return e.decodeAndBlitFrameRGBA(0,r.data),r},encode(t,e){const r=[t.data],i=new Uint8Array(t.width*t.height*r.length+1024),n=new _(i,t.width,t.height,{loop:e.loop});return r.forEach((r=>{const i=U(r,16),a=B(r,i);n.addFrame(0,0,t.width,t.height,a,{palette:i.map((([t,e,r])=>z(t,e,r))),delay:e.delay,transparent:i.length-1,disposal:2})})),i.slice(0,n.end())}};var M={exports:{}};!function(t){function e(t){var e,r,i,n,a,s=Math.floor,o=new Array(64),h=new Array(64),f=new Array(64),l=new Array(64),d=new Array(65535),u=new Array(65535),c=new Array(64),p=new Array(64),g=[],w=0,_=7,v=new Array(64),b=new Array(64),m=new Array(64),y=new Array(256),k=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(t,e){for(var r=0,i=0,n=new Array,a=1;a<=16;a++){for(var s=1;s<=t[a];s++)n[e[i]]=[],n[e[i]][0]=r,n[e[i]][1]=a,i++,r++;r*=2}return n}function R(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(w|=1<<_),r--,--_<0&&(255==w?(S(255),S(0)):S(w),_=7,w=0)}function S(t){g.push(t)}function C(t){S(t>>8&255),S(255&t)}function L(t,e,r,i,n){for(var a,s=n[0],o=n[240],h=function(t,e){var r,i,n,a,s,o,h,f,l,d,u=0;for(l=0;l<8;++l){r=t[u],i=t[u+1],n=t[u+2],a=t[u+3],s=t[u+4],o=t[u+5],h=t[u+6];var p=r+(f=t[u+7]),g=r-f,w=i+h,_=i-h,v=n+o,b=n-o,m=a+s,y=a-s,k=p+m,x=p-m,A=w+v,E=w-v;t[u]=k+A,t[u+4]=k-A;var I=.707106781*(E+x);t[u+2]=x+I,t[u+6]=x-I;var z=.382683433*((k=y+b)-(E=_+g)),U=.5411961*k+z,B=1.306562965*E+z,P=.707106781*(A=b+_),M=g+P,T=g-P;t[u+5]=T+U,t[u+3]=T-U,t[u+1]=M+B,t[u+7]=M-B,u+=8}for(u=0,l=0;l<8;++l){r=t[u],i=t[u+8],n=t[u+16],a=t[u+24],s=t[u+32],o=t[u+40],h=t[u+48];var R=r+(f=t[u+56]),S=r-f,C=i+h,L=i-h,D=n+o,H=n-o,N=a+s,G=a-s,O=R+N,F=R-N,Z=C+D,q=C-D;t[u]=O+Z,t[u+32]=O-Z;var V=.707106781*(q+F);t[u+16]=F+V,t[u+48]=F-V;var j=.382683433*((O=G+H)-(q=L+S)),X=.5411961*O+j,Y=1.306562965*q+j,W=.707106781*(Z=H+L),K=S+W,J=S-W;t[u+40]=J+X,t[u+24]=J-X,t[u+8]=K+Y,t[u+56]=K-Y,u++}for(l=0;l<64;++l)d=t[l]*e[l],c[l]=d>0?d+.5|0:d-.5|0;return c}(t,e),f=0;f<64;++f)p[x[f]]=h[f];var l=p[0]-r;r=p[0],0==l?R(i[0]):(R(i[u[a=32767+l]]),R(d[a]));for(var g=63;g>0&&0==p[g];g--);if(0==g)return R(s),r;for(var w,_=1;_<=g;){for(var v=_;0==p[_]&&_<=g;++_);var b=_-v;if(b>=16){w=b>>4;for(var m=1;m<=w;++m)R(o);b&=15}a=32767+p[_],R(n[(b<<4)+u[a]]),R(d[a]),_++}return 63!=g&&R(s),r}function D(t){if(t<=0&&(t=1),t>100&&(t=100),a!=t){(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var i=s((e[r]*t+50)/100);i<1?i=1:i>255&&(i=255),o[x[r]]=i}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var d=s((n[a]*t+50)/100);d<1?d=1:d>255&&(d=255),h[x[a]]=d}for(var u=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],c=0,p=0;p<8;p++)for(var g=0;g<8;g++)f[c]=1/(o[x[c]]*u[p]*u[g]*8),l[c]=1/(h[x[c]]*u[p]*u[g]*8),c++})(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),a=t}}this.encode=function(t,a){var s;(new Date).getTime(),a&&D(a),g=new Array,w=0,_=7,C(65496),C(65504),C(16),S(74),S(70),S(73),S(70),S(0),S(1),S(1),S(0),C(1),C(1),S(0),S(0),void 0!==(s=t.comments)&&s.constructor===Array&&s.forEach((t=>{if("string"==typeof t){C(65534);var e,r=t.length;for(C(r+2),e=0;e<r;e++)S(t.charCodeAt(e))}})),function(t){if(t){C(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?C(t.length+2):(C(t.length+5+2),S(69),S(120),S(105),S(102),S(0));for(var e=0;e<t.length;e++)S(t[e])}}(t.exifBuffer),function(){C(65499),C(132),S(0);for(var t=0;t<64;t++)S(o[t]);S(1);for(var e=0;e<64;e++)S(h[e])}(),function(t,e){C(65472),C(17),S(8),C(e),C(t),S(3),S(1),S(17),S(0),S(2),S(17),S(1),S(3),S(17),S(1)}(t.width,t.height),function(){C(65476),C(418),S(0);for(var t=0;t<16;t++)S(A[t+1]);for(var e=0;e<=11;e++)S(E[e]);S(16);for(var r=0;r<16;r++)S(I[r+1]);for(var i=0;i<=161;i++)S(z[i]);S(1);for(var n=0;n<16;n++)S(U[n+1]);for(var a=0;a<=11;a++)S(B[a]);S(17);for(var s=0;s<16;s++)S(P[s+1]);for(var o=0;o<=161;o++)S(M[o])}(),C(65498),C(12),S(3),S(1),S(0),S(2),S(17),S(3),S(17),S(0),S(63),S(0);var d=0,u=0,c=0;w=0,_=7,this.encode.displayName="_encode_";for(var p,y,x,T,H,N,G,O,F,Z=t.data,q=t.width,V=t.height,j=4*q,X=0;X<V;){for(p=0;p<j;){for(N=H=j*X+p,G=-1,O=0,F=0;F<64;F++)N=H+(O=F>>3)*j+(G=4*(7&F)),X+O>=V&&(N-=j*(X+1+O-V)),p+G>=j&&(N-=p+G-j+4),y=Z[N++],x=Z[N++],T=Z[N++],v[F]=(k[y]+k[x+256>>0]+k[T+512>>0]>>16)-128,b[F]=(k[y+768>>0]+k[x+1024>>0]+k[T+1280>>0]>>16)-128,m[F]=(k[y+1280>>0]+k[x+1536>>0]+k[T+1792>>0]>>16)-128;d=L(v,f,d,e,i),u=L(b,l,u,r,n),c=L(m,l,c,r,n),p+=32}X+=8}if(_>=0){var Y=[];Y[1]=_+1,Y[0]=(1<<_+1)-1,R(Y)}return C(65497),new Uint8Array(g)},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)y[e]=t(e)}(),e=T(A,E),r=T(U,B),i=T(I,z),n=T(P,M),function(){for(var t=1,e=2,r=1;r<=15;r++){for(var i=t;i<e;i++)u[32767+i]=r,d[32767+i]=[],d[32767+i][1]=r,d[32767+i][0]=i;for(var n=-(e-1);n<=-t;n++)u[32767+n]=r,d[32767+n]=[],d[32767+n][1]=r,d[32767+n][0]=e-1+n;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)k[t]=19595*t,k[t+256>>0]=38470*t,k[t+512>>0]=7471*t+32768,k[t+768>>0]=-11059*t,k[t+1024>>0]=-21709*t,k[t+1280>>0]=32768*t+8421375,k[t+1536>>0]=-27439*t,k[t+1792>>0]=-5329*t}(),D(t),(new Date).getTime()}M.exports=function(t,r){void 0===r&&(r=50);return{data:new e(r).encode(t,r),width:t.width,height:t.height}}}();var T,R,S={exports:{}};T=S,R=function(){var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,r=799,i=3406,n=2276,a=1567,s=3784,o=5793,h=2896;function f(){}function l(t,e){for(var r,i,n=0,a=[],s=16;s>0&&!t[s-1];)s--;a.push({children:[],index:0});var o,h=a[0];for(r=0;r<s;r++){for(i=0;i<t[r];i++){for((h=a.pop()).children[h.index]=e[n];h.index>0;){if(0===a.length)throw new Error("Could not recreate Huffman Table");h=a.pop()}for(h.index++,a.push(h);a.length<=r;)a.push(o={children:[],index:0}),h.children[h.index]=o.children,h=o;n++}r+1<s&&(a.push(o={children:[],index:0}),h.children[h.index]=o.children,h=o)}return a[0].children}function d(e,r,i,n,a,s,o,h,f,l){i.precision,i.samplesPerLine,i.scanLines;var d=i.mcusPerLine,u=i.progressive;i.maxH,i.maxV;var c=r,p=0,g=0;function w(){if(g>0)return g--,p>>g&1;if(255==(p=e[r++])){var t=e[r++];if(t)throw new Error("unexpected marker: "+(p<<8|t).toString(16))}return g=7,p>>>7}function _(t){for(var e,r=t;null!==(e=w());){if("number"==typeof(r=r[e]))return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function v(t){for(var e=0;t>0;){var r=w();if(null===r)return;e=e<<1|r,t--}return e}function b(t){var e=v(t);return e>=1<<t-1?e:e+(-1<<t)+1}var m,y=0,k=0;function x(t,e,r,i,n){var a=r%d,s=(r/d|0)*t.v+i,o=a*t.h+n;void 0===t.blocks[s]&&l.tolerantDecoding||e(t,t.blocks[s][o])}function A(t,e,r){var i=r/t.blocksPerLine|0,n=r%t.blocksPerLine;void 0===t.blocks[i]&&l.tolerantDecoding||e(t,t.blocks[i][n])}var E,I,z,U,B,P,M=n.length;P=u?0===s?0===h?function(t,e){var r=_(t.huffmanTableDC),i=0===r?0:b(r)<<f;e[0]=t.pred+=i}:function(t,e){e[0]|=w()<<f}:0===h?function(e,r){if(y>0)y--;else for(var i=s,n=o;i<=n;){var a=_(e.huffmanTableAC),h=15&a,l=a>>4;if(0!==h)r[t[i+=l]]=b(h)*(1<<f),i++;else{if(l<15){y=v(l)+(1<<l)-1;break}i+=16}}}:function(e,r){for(var i=s,n=o,a=0;i<=n;){var h=t[i],l=r[h]<0?-1:1;switch(k){case 0:var d=_(e.huffmanTableAC),u=15&d;if(a=d>>4,0===u)a<15?(y=v(a)+(1<<a),k=4):(a=16,k=1);else{if(1!==u)throw new Error("invalid ACn encoding");m=b(u),k=a?2:3}continue;case 1:case 2:r[h]?r[h]+=(w()<<f)*l:0==--a&&(k=2==k?3:0);break;case 3:r[h]?r[h]+=(w()<<f)*l:(r[h]=m<<f,k=0);break;case 4:r[h]&&(r[h]+=(w()<<f)*l)}i++}4===k&&0==--y&&(k=0)}:function(e,r){var i=_(e.huffmanTableDC),n=0===i?0:b(i);r[0]=e.pred+=n;for(var a=1;a<64;){var s=_(e.huffmanTableAC),o=15&s,h=s>>4;if(0!==o)r[t[a+=h]]=b(o),a++;else{if(h<15)break;a+=16}}};var T,R,S,C,L=0;for(R=1==M?n[0].blocksPerLine*n[0].blocksPerColumn:d*i.mcusPerColumn,a||(a=R);L<R;){for(I=0;I<M;I++)n[I].pred=0;if(y=0,1==M)for(E=n[0],B=0;B<a;B++)A(E,P,L),L++;else for(B=0;B<a;B++){for(I=0;I<M;I++)for(S=(E=n[I]).h,C=E.v,z=0;z<C;z++)for(U=0;U<S;U++)x(E,P,L,z,U);if(++L===R)break}if(L===R)do{if(255===e[r]&&0!==e[r+1])break;r+=1}while(r<e.length-2);if(g=0,(T=e[r]<<8|e[r+1])<65280)throw new Error("marker was not found");if(!(T>=65488&&T<=65495))break;r+=2}return r-c}function u(t,f){var l,d,u=[],c=f.blocksPerLine,p=f.blocksPerColumn,g=c<<3,_=new Int32Array(64),v=new Uint8Array(64);function b(t,l,d){var u,c,p,g,w,_,v,b,m,y,k=f.quantizationTable,x=d;for(y=0;y<64;y++)x[y]=t[y]*k[y];for(y=0;y<8;++y){var A=8*y;0!=x[1+A]||0!=x[2+A]||0!=x[3+A]||0!=x[4+A]||0!=x[5+A]||0!=x[6+A]||0!=x[7+A]?(u=o*x[0+A]+128>>8,c=o*x[4+A]+128>>8,p=x[2+A],g=x[6+A],w=h*(x[1+A]-x[7+A])+128>>8,b=h*(x[1+A]+x[7+A])+128>>8,_=x[3+A]<<4,v=x[5+A]<<4,m=u-c+1>>1,u=u+c+1>>1,c=m,m=p*s+g*a+128>>8,p=p*a-g*s+128>>8,g=m,m=w-v+1>>1,w=w+v+1>>1,v=m,m=b+_+1>>1,_=b-_+1>>1,b=m,m=u-g+1>>1,u=u+g+1>>1,g=m,m=c-p+1>>1,c=c+p+1>>1,p=m,m=w*n+b*i+2048>>12,w=w*i-b*n+2048>>12,b=m,m=_*r+v*e+2048>>12,_=_*e-v*r+2048>>12,v=m,x[0+A]=u+b,x[7+A]=u-b,x[1+A]=c+v,x[6+A]=c-v,x[2+A]=p+_,x[5+A]=p-_,x[3+A]=g+w,x[4+A]=g-w):(m=o*x[0+A]+512>>10,x[0+A]=m,x[1+A]=m,x[2+A]=m,x[3+A]=m,x[4+A]=m,x[5+A]=m,x[6+A]=m,x[7+A]=m)}for(y=0;y<8;++y){var E=y;0!=x[8+E]||0!=x[16+E]||0!=x[24+E]||0!=x[32+E]||0!=x[40+E]||0!=x[48+E]||0!=x[56+E]?(u=o*x[0+E]+2048>>12,c=o*x[32+E]+2048>>12,p=x[16+E],g=x[48+E],w=h*(x[8+E]-x[56+E])+2048>>12,b=h*(x[8+E]+x[56+E])+2048>>12,_=x[24+E],v=x[40+E],m=u-c+1>>1,u=u+c+1>>1,c=m,m=p*s+g*a+2048>>12,p=p*a-g*s+2048>>12,g=m,m=w-v+1>>1,w=w+v+1>>1,v=m,m=b+_+1>>1,_=b-_+1>>1,b=m,m=u-g+1>>1,u=u+g+1>>1,g=m,m=c-p+1>>1,c=c+p+1>>1,p=m,m=w*n+b*i+2048>>12,w=w*i-b*n+2048>>12,b=m,m=_*r+v*e+2048>>12,_=_*e-v*r+2048>>12,v=m,x[0+E]=u+b,x[56+E]=u-b,x[8+E]=c+v,x[48+E]=c-v,x[16+E]=p+_,x[40+E]=p-_,x[24+E]=g+w,x[32+E]=g-w):(m=o*d[y+0]+8192>>14,x[0+E]=m,x[8+E]=m,x[16+E]=m,x[24+E]=m,x[32+E]=m,x[40+E]=m,x[48+E]=m,x[56+E]=m)}for(y=0;y<64;++y){var I=128+(x[y]+8>>4);l[y]=I<0?0:I>255?255:I}}w(g*p*8);for(var m=0;m<p;m++){var y=m<<3;for(l=0;l<8;l++)u.push(new Uint8Array(g));for(var k=0;k<c;k++){b(f.blocks[m][k],v,_);var x=0,A=k<<3;for(d=0;d<8;d++){var E=u[y+d];for(l=0;l<8;l++)E[A+l]=v[x++]}}}return u}function c(t){return t<0?0:t>255?255:t}f.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(e){var r=1e3*this.opts.maxResolutionInMP*1e3,i=0;function n(){var t=e[i]<<8|e[i+1];return i+=2,t}function a(t){var e,r,i=1,n=1;for(r in t.components)t.components.hasOwnProperty(r)&&(i<(e=t.components[r]).h&&(i=e.h),n<e.v&&(n=e.v));var a=Math.ceil(t.samplesPerLine/8/i),s=Math.ceil(t.scanLines/8/n);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];var o=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/i),h=Math.ceil(Math.ceil(t.scanLines/8)*e.v/n),f=a*e.h,l=s*e.v,d=[];w(l*f*256);for(var u=0;u<l;u++){for(var c=[],p=0;p<f;p++)c.push(new Int32Array(64));d.push(c)}e.blocksPerLine=o,e.blocksPerColumn=h,e.blocks=d}t.maxH=i,t.maxV=n,t.mcusPerLine=a,t.mcusPerColumn=s}e.length;var s,o,h,f,c=null,p=null,g=[],_=[],v=[],b=[],m=n(),y=-1;if(this.comments=[],65496!=m)throw new Error("SOI not found");for(m=n();65497!=m;){switch(m){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var k=(h=void 0,f=void 0,h=n(),f=e.subarray(i,i+h-2),i+=f.length,f);if(65534===m){var x=String.fromCharCode.apply(null,k);this.comments.push(x)}65504===m&&74===k[0]&&70===k[1]&&73===k[2]&&70===k[3]&&0===k[4]&&(c={version:{major:k[5],minor:k[6]},densityUnits:k[7],xDensity:k[8]<<8|k[9],yDensity:k[10]<<8|k[11],thumbWidth:k[12],thumbHeight:k[13],thumbData:k.subarray(14,14+3*k[12]*k[13])}),65505===m&&69===k[0]&&120===k[1]&&105===k[2]&&102===k[3]&&0===k[4]&&(this.exifBuffer=k.subarray(5,k.length)),65518===m&&65===k[0]&&100===k[1]&&111===k[2]&&98===k[3]&&101===k[4]&&0===k[5]&&(p={version:k[6],flags0:k[7]<<8|k[8],flags1:k[9]<<8|k[10],transformCode:k[11]});break;case 65499:for(var A=n()+i-2;i<A;){var E=e[i++];w(256);var I=new Int32Array(64);if(E>>4==0)for(Y=0;Y<64;Y++)I[t[Y]]=e[i++];else{if(E>>4!=1)throw new Error("DQT: invalid table spec");for(Y=0;Y<64;Y++)I[t[Y]]=n()}g[15&E]=I}break;case 65472:case 65473:case 65474:n(),(s={}).extended=65473===m,s.progressive=65474===m,s.precision=e[i++],s.scanLines=n(),s.samplesPerLine=n(),s.components={},s.componentsOrder=[];var z=s.scanLines*s.samplesPerLine;if(z>r){var U=Math.ceil((z-r)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${U}MP`)}var B,P=e[i++];for(j=0;j<P;j++){B=e[i];var M=e[i+1]>>4,T=15&e[i+1],R=e[i+2];if(M<=0||T<=0)throw new Error("Invalid sampling factor, expected values above 0");s.componentsOrder.push(B),s.components[B]={h:M,v:T,quantizationIdx:R},i+=3}a(s),_.push(s);break;case 65476:var S=n();for(j=2;j<S;){var C=e[i++],L=new Uint8Array(16),D=0;for(Y=0;Y<16;Y++,i++)D+=L[Y]=e[i];w(16+D);var H=new Uint8Array(D);for(Y=0;Y<D;Y++,i++)H[Y]=e[i];j+=17+D,(C>>4==0?b:v)[15&C]=l(L,H)}break;case 65501:n(),o=n();break;case 65500:n(),n();break;case 65498:n();var N=e[i++],G=[];for(j=0;j<N;j++){W=s.components[e[i++]];var O=e[i++];W.huffmanTableDC=b[O>>4],W.huffmanTableAC=v[15&O],G.push(W)}var F=e[i++],Z=e[i++],q=e[i++],V=d(e,i,s,G,o,F,Z,q>>4,15&q,this.opts);i+=V;break;case 65535:255!==e[i]&&i--;break;default:if(255==e[i-3]&&e[i-2]>=192&&e[i-2]<=254){i-=3;break}if(224===m||225==m){if(-1!==y)throw new Error(`first unknown JPEG marker at offset ${y.toString(16)}, second unknown JPEG marker ${m.toString(16)} at offset ${(i-1).toString(16)}`);y=i-1;const t=n();if(255===e[i+t-2]){i+=t-2;break}}throw new Error("unknown JPEG marker "+m.toString(16))}m=n()}if(1!=_.length)throw new Error("only single frame JPEGs supported");for(var j=0;j<_.length;j++){var X=_[j].components;for(var Y in X)X[Y].quantizationTable=g[X[Y].quantizationIdx],delete X[Y].quantizationIdx}for(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=c,this.adobe=p,this.components=[],j=0;j<s.componentsOrder.length;j++){var W=s.components[s.componentsOrder[j]];this.components.push({lines:u(0,W),scaleX:W.h/s.maxH,scaleY:W.v/s.maxV})}},getData:function(t,e){var r,i,n,a,s,o,h,f,l,d,u,p,g,_,v,b,m,y,k,x,A,E=this.width/t,I=this.height/e,z=0,U=t*e*this.components.length;w(U);var B=new Uint8Array(U);switch(this.components.length){case 1:for(r=this.components[0],d=0;d<e;d++)for(s=r.lines[0|d*r.scaleY*I],l=0;l<t;l++)u=s[0|l*r.scaleX*E],B[z++]=u;break;case 2:for(r=this.components[0],i=this.components[1],d=0;d<e;d++)for(s=r.lines[0|d*r.scaleY*I],o=i.lines[0|d*i.scaleY*I],l=0;l<t;l++)u=s[0|l*r.scaleX*E],B[z++]=u,u=o[0|l*i.scaleX*E],B[z++]=u;break;case 3:for(A=!0,this.adobe&&this.adobe.transformCode?A=!0:void 0!==this.opts.colorTransform&&(A=!!this.opts.colorTransform),r=this.components[0],i=this.components[1],n=this.components[2],d=0;d<e;d++)for(s=r.lines[0|d*r.scaleY*I],o=i.lines[0|d*i.scaleY*I],h=n.lines[0|d*n.scaleY*I],l=0;l<t;l++)A?(u=s[0|l*r.scaleX*E],p=o[0|l*i.scaleX*E],y=c(u+1.402*((g=h[0|l*n.scaleX*E])-128)),k=c(u-.3441363*(p-128)-.71413636*(g-128)),x=c(u+1.772*(p-128))):(y=s[0|l*r.scaleX*E],k=o[0|l*i.scaleX*E],x=h[0|l*n.scaleX*E]),B[z++]=y,B[z++]=k,B[z++]=x;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(A=!1,this.adobe&&this.adobe.transformCode?A=!0:void 0!==this.opts.colorTransform&&(A=!!this.opts.colorTransform),r=this.components[0],i=this.components[1],n=this.components[2],a=this.components[3],d=0;d<e;d++)for(s=r.lines[0|d*r.scaleY*I],o=i.lines[0|d*i.scaleY*I],h=n.lines[0|d*n.scaleY*I],f=a.lines[0|d*a.scaleY*I],l=0;l<t;l++)A?(u=s[0|l*r.scaleX*E],p=o[0|l*i.scaleX*E],g=h[0|l*n.scaleX*E],_=f[0|l*a.scaleX*E],v=255-c(u+1.402*(g-128)),b=255-c(u-.3441363*(p-128)-.71413636*(g-128)),m=255-c(u+1.772*(p-128))):(v=s[0|l*r.scaleX*E],b=o[0|l*i.scaleX*E],m=h[0|l*n.scaleX*E],_=f[0|l*a.scaleX*E]),B[z++]=255-v,B[z++]=255-b,B[z++]=255-m,B[z++]=255-_;break;default:throw new Error("Unsupported color mode")}return B},copyToImageData:function(t,e){var r,i,n,a,s,o,h,f,l,d=t.width,u=t.height,p=t.data,g=this.getData(d,u),w=0,_=0;switch(this.components.length){case 1:for(i=0;i<u;i++)for(r=0;r<d;r++)n=g[w++],p[_++]=n,p[_++]=n,p[_++]=n,e&&(p[_++]=255);break;case 3:for(i=0;i<u;i++)for(r=0;r<d;r++)h=g[w++],f=g[w++],l=g[w++],p[_++]=h,p[_++]=f,p[_++]=l,e&&(p[_++]=255);break;case 4:for(i=0;i<u;i++)for(r=0;r<d;r++)s=g[w++],o=g[w++],n=g[w++],h=255-c(s*(1-(a=g[w++])/255)+a),f=255-c(o*(1-a/255)+a),l=255-c(n*(1-a/255)+a),p[_++]=h,p[_++]=f,p[_++]=l,e&&(p[_++]=255);break;default:throw new Error("Unsupported color mode")}}};var p=0,g=0;function w(t=0){var e=p+t;if(e>g){var r=Math.ceil((e-g)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${r}MB`)}p=e}return f.resetMaxMemoryUsage=function(t){p=0,g=t},f.getBytesAllocated=function(){return p},f.requestMemoryAllocation=w,f}(),T.exports=function(t,e={}){var r={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...e},i=new Uint8Array(t),n=new R;n.opts=r,R.resetMaxMemoryUsage(1024*r.maxMemoryUsageInMB*1024),n.parse(i);var a=r.formatAsRGBA?4:3,s=n.width*n.height*a;try{R.requestMemoryAllocation(s);var o={width:n.width,height:n.height,exifBuffer:n.exifBuffer,data:r.useTArray?new Uint8Array(s):Buffer.alloc(s)};n.comments.length>0&&(o.comments=n.comments)}catch(t){if(t instanceof RangeError)throw new Error("Could not allocate enough memory for the image. Required: "+s);if(t instanceof ReferenceError&&"Buffer is not defined"===t.message)throw new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true");throw t}return n.copyToImageData(o,r.formatAsRGBA),o};var C={encode:M.exports,decode:S.exports};const L={decode(t){const e=C.decode(t,{useTArray:!0,colorTransform:!0});return{width:e.width,height:e.height,data:e.data}},encode(t,e){const r=C.encode(t,e.quality);return new Uint8Array(r.data)}};var D={};!function(t){var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},t.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var a=0;a<i;a++)t[n+a]=e[r+a]},flattenChunks:function(t){var e,r,i,n,a,s;for(i=0,e=0,r=t.length;e<r;e++)i+=t[e].length;for(s=new Uint8Array(i),n=0,e=0,r=t.length;e<r;e++)a=t[e],s.set(a,n),n+=a.length;return s}},n={arraySet:function(t,e,r,i,n){for(var a=0;a<i;a++)t[n+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,n))},t.setTyped(e)}(D);var H={},N={},G={},O=D;function F(t){for(var e=t.length;--e>=0;)t[e]=0}var Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(576);F(X);var Y=new Array(60);F(Y);var W=new Array(512);F(W);var K=new Array(256);F(K);var J=new Array(29);F(J);var $,Q,tt,et=new Array(30);function rt(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function it(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function nt(t){return t<256?W[t]:W[256+(t>>>7)]}function at(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function st(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,at(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function ot(t,e,r){st(t,r[2*e],r[2*e+1])}function ht(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function ft(t,e,r){var i,n,a=new Array(16),s=0;for(i=1;i<=15;i++)a[i]=s=s+r[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=ht(a[o]++,o))}}function lt(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function dt(t){t.bi_valid>8?at(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function ut(t,e,r,i){var n=2*e,a=2*r;return t[n]<t[a]||t[n]===t[a]&&i[e]<=i[r]}function ct(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&ut(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!ut(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function pt(t,e,r){var i,n,a,s,o=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?ot(t,n,e):(ot(t,(a=K[n])+256+1,e),0!==(s=Z[a])&&st(t,n-=J[a],s),ot(t,a=nt(--i),r),0!==(s=q[a])&&st(t,i-=et[a],s))}while(o<t.last_lit);ot(t,256,e)}function gt(t,e){var r,i,n,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<h;r++)0!==a[2*r]?(t.heap[++t.heap_len]=f=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(n=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=f,r=t.heap_len>>1;r>=1;r--)ct(t,a,r);n=h;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ct(t,a,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,a[2*n]=a[2*r]+a[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,a[2*r+1]=a[2*i+1]=n,t.heap[1]=n++,ct(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,a,s,o,h=e.dyn_tree,f=e.max_code,l=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(a=0;a<=15;a++)t.bl_count[a]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(a=h[2*h[2*(i=t.heap[r])+1]+1]+1)>p&&(a=p,g++),h[2*i+1]=a,i>f||(t.bl_count[a]++,s=0,i>=c&&(s=u[i-c]),o=h[2*i],t.opt_len+=o*(a+s),d&&(t.static_len+=o*(l[2*i+1]+s)));if(0!==g){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(a=p;0!==a;a--)for(i=t.bl_count[a];0!==i;)(n=t.heap[--r])>f||(h[2*n+1]!==a&&(t.opt_len+=(a-h[2*n+1])*h[2*n],h[2*n+1]=a),i--)}}(t,e),ft(a,f,t.bl_count)}function wt(t,e,r){var i,n,a=-1,s=e[1],o=0,h=7,f=4;for(0===s&&(h=138,f=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=s,s=e[2*(i+1)+1],++o<h&&n===s||(o<f?t.bl_tree[2*n]+=o:0!==n?(n!==a&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=n,0===s?(h=138,f=3):n===s?(h=6,f=3):(h=7,f=4))}function _t(t,e,r){var i,n,a=-1,s=e[1],o=0,h=7,f=4;for(0===s&&(h=138,f=3),i=0;i<=r;i++)if(n=s,s=e[2*(i+1)+1],!(++o<h&&n===s)){if(o<f)do{ot(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==a&&(ot(t,n,t.bl_tree),o--),ot(t,16,t.bl_tree),st(t,o-3,2)):o<=10?(ot(t,17,t.bl_tree),st(t,o-3,3)):(ot(t,18,t.bl_tree),st(t,o-11,7));o=0,a=n,0===s?(h=138,f=3):n===s?(h=6,f=3):(h=7,f=4)}}F(et);var vt=!1;function bt(t,e,r,i){st(t,0+(i?1:0),3),function(t,e,r,i){dt(t),i&&(at(t,r),at(t,~r)),O.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}G._tr_init=function(t){vt||(!function(){var t,e,r,i,n,a=new Array(16);for(r=0,i=0;i<28;i++)for(J[i]=r,t=0;t<1<<Z[i];t++)K[r++]=i;for(K[r-1]=i,n=0,i=0;i<16;i++)for(et[i]=n,t=0;t<1<<q[i];t++)W[n++]=i;for(n>>=7;i<30;i++)for(et[i]=n<<7,t=0;t<1<<q[i]-7;t++)W[256+n++]=i;for(e=0;e<=15;e++)a[e]=0;for(t=0;t<=143;)X[2*t+1]=8,t++,a[8]++;for(;t<=255;)X[2*t+1]=9,t++,a[9]++;for(;t<=279;)X[2*t+1]=7,t++,a[7]++;for(;t<=287;)X[2*t+1]=8,t++,a[8]++;for(ft(X,287,a),t=0;t<30;t++)Y[2*t+1]=5,Y[2*t]=ht(t,5);$=new rt(X,Z,257,286,15),Q=new rt(Y,q,0,30,15),tt=new rt(new Array(0),V,0,19,7)}(),vt=!0),t.l_desc=new it(t.dyn_ltree,$),t.d_desc=new it(t.dyn_dtree,Q),t.bl_desc=new it(t.bl_tree,tt),t.bi_buf=0,t.bi_valid=0,lt(t)},G._tr_stored_block=bt,G._tr_flush_block=function(t,e,r,i){var n,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),gt(t,t.l_desc),gt(t,t.d_desc),s=function(t){var e;for(wt(t,t.dyn_ltree,t.l_desc.max_code),wt(t,t.dyn_dtree,t.d_desc.max_code),gt(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*j[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=n&&(n=a)):n=a=r+5,r+4<=n&&-1!==e?bt(t,e,r,i):4===t.strategy||a===n?(st(t,2+(i?1:0),3),pt(t,X,Y)):(st(t,4+(i?1:0),3),function(t,e,r,i){var n;for(st(t,e-257,5),st(t,r-1,5),st(t,i-4,4),n=0;n<i;n++)st(t,t.bl_tree[2*j[n]+1],3);_t(t,t.dyn_ltree,e-1),_t(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),pt(t,t.dyn_ltree,t.dyn_dtree)),lt(t),i&&dt(t)},G._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(K[r]+256+1)]++,t.dyn_dtree[2*nt(e)]++),t.last_lit===t.lit_bufsize-1},G._tr_align=function(t){st(t,2,3),ot(t,256,X),function(t){16===t.bi_valid?(at(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)};var mt=function(t,e,r,i){for(var n=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(n=n+e[i++]|0)|0}while(--s);n%=65521,a%=65521}return n|a<<16|0};var yt=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();var kt,xt=function(t,e,r,i){var n=yt,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^n[255&(t^e[s])];return-1^t},At={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Et=D,It=G,zt=mt,Ut=xt,Bt=At;function Pt(t,e){return t.msg=Bt[e],e}function Mt(t){return(t<<1)-(t>4?9:0)}function Tt(t){for(var e=t.length;--e>=0;)t[e]=0}function Rt(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(Et.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function St(t,e){It._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Rt(t.strm)}function Ct(t,e){t.pending_buf[t.pending++]=e}function Lt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Dt(t,e){var r,i,n=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,f=t.window,l=t.w_mask,d=t.prev,u=t.strstart+258,c=f[a+s-1],p=f[a+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(f[(r=e)+s]===p&&f[r+s-1]===c&&f[r]===f[a]&&f[++r]===f[a+1]){a+=2,r++;do{}while(f[++a]===f[++r]&&f[++a]===f[++r]&&f[++a]===f[++r]&&f[++a]===f[++r]&&f[++a]===f[++r]&&f[++a]===f[++r]&&f[++a]===f[++r]&&f[++a]===f[++r]&&a<u);if(i=258-(u-a),a=u-258,i>s){if(t.match_start=e,s=i,i>=o)break;c=f[a+s-1],p=f[a+s]}}}while((e=d[e&l])>h&&0!=--n);return s<=t.lookahead?s:t.lookahead}function Ht(t){var e,r,i,n,a,s,o,h,f,l,d=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-262)){Et.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{i=t.head[--e],t.head[e]=i>=d?i-d:0}while(--r);e=r=d;do{i=t.prev[--e],t.prev[e]=i>=d?i-d:0}while(--r);n+=d}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,h=t.strstart+t.lookahead,f=n,l=void 0,(l=s.avail_in)>f&&(l=f),r=0===l?0:(s.avail_in-=l,Et.arraySet(o,s.input,s.next_in,l,h),1===s.state.wrap?s.adler=zt(s.adler,o,l,h):2===s.state.wrap&&(s.adler=Ut(s.adler,o,l,h)),s.next_in+=l,s.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+3-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function Nt(t,e){for(var r,i;;){if(t.lookahead<262){if(Ht(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=Dt(t,r)),t.match_length>=3)if(i=It._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=It._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2}function Gt(t,e){for(var r,i,n;;){if(t.lookahead<262){if(Ht(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=Dt(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=It._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(St(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=It._tr_tally(t,0,t.window[t.strstart-1]))&&St(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=It._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2}function Ot(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Et.Buf16(1146),this.dyn_dtree=new Et.Buf16(122),this.bl_tree=new Et.Buf16(78),Tt(this.dyn_ltree),Tt(this.dyn_dtree),Tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Et.Buf16(16),this.heap=new Et.Buf16(573),Tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Et.Buf16(573),Tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Zt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,It._tr_init(e),0):Pt(t,-2)}function qt(t){var e,r=Zt(t);return 0===r&&((e=t.state).window_size=2*e.w_size,Tt(e.head),e.max_lazy_match=kt[e.level].max_lazy,e.good_match=kt[e.level].good_length,e.nice_match=kt[e.level].nice_length,e.max_chain_length=kt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function Vt(t,e,r,i,n,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),n<1||n>9||8!==r||i<8||i>15||e<0||e>9||a<0||a>4)return Pt(t,-2);8===i&&(i=9);var o=new Ft;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Et.Buf8(2*o.w_size),o.head=new Et.Buf16(o.hash_size),o.prev=new Et.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Et.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=a,o.method=r,qt(t)}kt=[new Ot(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ht(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,St(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(St(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(St(t,!1),t.strm.avail_out),1)})),new Ot(4,4,8,4,Nt),new Ot(4,5,16,8,Nt),new Ot(4,6,32,32,Nt),new Ot(4,4,16,16,Gt),new Ot(8,16,32,32,Gt),new Ot(8,16,128,128,Gt),new Ot(8,32,128,256,Gt),new Ot(32,128,258,1024,Gt),new Ot(32,258,258,4096,Gt)],N.deflateInit=function(t,e){return Vt(t,e,8,15,8,0)},N.deflateInit2=Vt,N.deflateReset=qt,N.deflateResetKeep=Zt,N.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},N.deflate=function(t,e){var r,i,n,a;if(!t||!t.state||e>5||e<0)return t?Pt(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return Pt(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,Ct(i,31),Ct(i,139),Ct(i,8),i.gzhead?(Ct(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ct(i,255&i.gzhead.time),Ct(i,i.gzhead.time>>8&255),Ct(i,i.gzhead.time>>16&255),Ct(i,i.gzhead.time>>24&255),Ct(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),Ct(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Ct(i,255&i.gzhead.extra.length),Ct(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Ut(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Ct(i,0),Ct(i,0),Ct(i,0),Ct(i,0),Ct(i,0),Ct(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),Ct(i,3),i.status=113);else{var s=8+(i.w_bits-8<<4)<<8;s|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=113,Lt(i,s),0!==i.strstart&&(Lt(i,t.adler>>>16),Lt(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=Ut(t.adler,i.pending_buf,i.pending-n,n)),Rt(t),n=i.pending,i.pending!==i.pending_buf_size));)Ct(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=Ut(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Ut(t.adler,i.pending_buf,i.pending-n,n)),Rt(t),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Ct(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>n&&(t.adler=Ut(t.adler,i.pending_buf,i.pending-n,n)),0===a&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Ut(t.adler,i.pending_buf,i.pending-n,n)),Rt(t),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Ct(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>n&&(t.adler=Ut(t.adler,i.pending_buf,i.pending-n,n)),0===a&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Rt(t),i.pending+2<=i.pending_buf_size&&(Ct(i,255&t.adler),Ct(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(Rt(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&Mt(e)<=Mt(r)&&4!==e)return Pt(t,-5);if(666===i.status&&0!==t.avail_in)return Pt(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var o=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(Ht(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=It._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,i,n,a,s=t.window;;){if(t.lookahead<=258){if(Ht(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){a=t.strstart+258;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<a);t.match_length=258-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=It._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=It._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2}(i,e):kt[i.level].func(i,e);if(3!==o&&4!==o||(i.status=666),1===o||3===o)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===o&&(1===e?It._tr_align(i):5!==e&&(It._tr_stored_block(i,0,0,!1),3===e&&(Tt(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Rt(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(Ct(i,255&t.adler),Ct(i,t.adler>>8&255),Ct(i,t.adler>>16&255),Ct(i,t.adler>>24&255),Ct(i,255&t.total_in),Ct(i,t.total_in>>8&255),Ct(i,t.total_in>>16&255),Ct(i,t.total_in>>24&255)):(Lt(i,t.adler>>>16),Lt(i,65535&t.adler)),Rt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},N.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?Pt(t,-2):(t.state=null,113===e?Pt(t,-3):0):-2},N.deflateSetDictionary=function(t,e){var r,i,n,a,s,o,h,f,l=e.length;if(!t||!t.state)return-2;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return-2;for(1===a&&(t.adler=zt(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===a&&(Tt(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new Et.Buf8(r.w_size),Et.arraySet(f,e,l-r.w_size,r.w_size,0),e=f,l=r.w_size),s=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,Ht(r);r.lookahead>=3;){i=r.strstart,n=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--n);r.strstart=i,r.lookahead=2,Ht(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=s,r.wrap=a,0},N.deflateInfo="pako deflate (from Nodeca project)";var jt={},Xt=D,Yt=!0,Wt=!0;try{String.fromCharCode.apply(null,[0])}catch(t){Yt=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Wt=!1}for(var Kt=new Xt.Buf8(256),Jt=0;Jt<256;Jt++)Kt[Jt]=Jt>=252?6:Jt>=248?5:Jt>=240?4:Jt>=224?3:Jt>=192?2:1;function $t(t,e){if(e<65534&&(t.subarray&&Wt||!t.subarray&&Yt))return String.fromCharCode.apply(null,Xt.shrinkBuf(t,e));for(var r="",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}Kt[254]=Kt[254]=1,jt.string2buf=function(t){var e,r,i,n,a,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Xt.Buf8(o),a=0,n=0;a<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},jt.buf2binstring=function(t){return $t(t,t.length)},jt.binstring2buf=function(t){for(var e=new Xt.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},jt.buf2string=function(t,e){var r,i,n,a,s=e||t.length,o=new Array(2*s);for(i=0,r=0;r<s;)if((n=t[r++])<128)o[i++]=n;else if((a=Kt[n])>4)o[i++]=65533,r+=a-1;else{for(n&=2===a?31:3===a?15:7;a>1&&r<s;)n=n<<6|63&t[r++],a--;a>1?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return $t(o,i)},jt.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Kt[t[r]]>e?r:e};var Qt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},te=N,ee=D,re=jt,ie=At,ne=Qt,ae=Object.prototype.toString;function se(t){if(!(this instanceof se))return new se(t);this.options=ee.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ne,this.strm.avail_out=0;var r=te.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(ie[r]);if(e.header&&te.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?re.string2buf(e.dictionary):"[object ArrayBuffer]"===ae.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=te.deflateSetDictionary(this.strm,i)))throw new Error(ie[r]);this._dict_set=!0}}function oe(t,e){var r=new se(e);if(r.push(t,!0),r.err)throw r.msg||ie[r.err];return r.result}se.prototype.push=function(t,e){var r,i,n=this.strm,a=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?n.input=re.string2buf(t):"[object ArrayBuffer]"===ae.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new ee.Buf8(a),n.next_out=0,n.avail_out=a),1!==(r=te.deflate(n,i))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(re.buf2binstring(ee.shrinkBuf(n.output,n.next_out))):this.onData(ee.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&1!==r);return 4===i?(r=te.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==i||(this.onEnd(0),n.avail_out=0,!0)},se.prototype.onData=function(t){this.chunks.push(t)},se.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},H.Deflate=se,H.deflate=oe,H.deflateRaw=function(t,e){return(e=e||{}).raw=!0,oe(t,e)},H.gzip=function(t,e){return(e=e||{}).gzip=!0,oe(t,e)};var he={},fe={},le=D,de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ue=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],pe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ge=D,we=mt,_e=xt,ve=function(t,e){var r,i,n,a,s,o,h,f,l,d,u,c,p,g,w,_,v,b,m,y,k,x,A,E,I;r=t.state,i=t.next_in,E=t.input,n=i+(t.avail_in-5),a=t.next_out,I=t.output,s=a-(e-t.avail_out),o=a+(t.avail_out-257),h=r.dmax,f=r.wsize,l=r.whave,d=r.wnext,u=r.window,c=r.hold,p=r.bits,g=r.lencode,w=r.distcode,_=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{p<15&&(c+=E[i++]<<p,p+=8,c+=E[i++]<<p,p+=8),b=g[c&_];e:for(;;){if(c>>>=m=b>>>24,p-=m,0===(m=b>>>16&255))I[a++]=65535&b;else{if(!(16&m)){if(0==(64&m)){b=g[(65535&b)+(c&(1<<m)-1)];continue e}if(32&m){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}y=65535&b,(m&=15)&&(p<m&&(c+=E[i++]<<p,p+=8),y+=c&(1<<m)-1,c>>>=m,p-=m),p<15&&(c+=E[i++]<<p,p+=8,c+=E[i++]<<p,p+=8),b=w[c&v];r:for(;;){if(c>>>=m=b>>>24,p-=m,!(16&(m=b>>>16&255))){if(0==(64&m)){b=w[(65535&b)+(c&(1<<m)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(k=65535&b,p<(m&=15)&&(c+=E[i++]<<p,(p+=8)<m&&(c+=E[i++]<<p,p+=8)),(k+=c&(1<<m)-1)>h){t.msg="invalid distance too far back",r.mode=30;break t}if(c>>>=m,p-=m,k>(m=a-s)){if((m=k-m)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(x=0,A=u,0===d){if(x+=f-m,m<y){y-=m;do{I[a++]=u[x++]}while(--m);x=a-k,A=I}}else if(d<m){if(x+=f+d-m,(m-=d)<y){y-=m;do{I[a++]=u[x++]}while(--m);if(x=0,d<y){y-=m=d;do{I[a++]=u[x++]}while(--m);x=a-k,A=I}}}else if(x+=d-m,m<y){y-=m;do{I[a++]=u[x++]}while(--m);x=a-k,A=I}for(;y>2;)I[a++]=A[x++],I[a++]=A[x++],I[a++]=A[x++],y-=3;y&&(I[a++]=A[x++],y>1&&(I[a++]=A[x++]))}else{x=a-k;do{I[a++]=I[x++],I[a++]=I[x++],I[a++]=I[x++],y-=3}while(y>2);y&&(I[a++]=I[x++],y>1&&(I[a++]=I[x++]))}break}}break}}while(i<n&&a<o);i-=y=p>>3,c&=(1<<(p-=y<<3))-1,t.next_in=i,t.next_out=a,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=a<o?o-a+257:257-(a-o),r.hold=c,r.bits=p},be=function(t,e,r,i,n,a,s,o){var h,f,l,d,u,c,p,g,w,_=o.bits,v=0,b=0,m=0,y=0,k=0,x=0,A=0,E=0,I=0,z=0,U=null,B=0,P=new le.Buf16(16),M=new le.Buf16(16),T=null,R=0;for(v=0;v<=15;v++)P[v]=0;for(b=0;b<i;b++)P[e[r+b]]++;for(k=_,y=15;y>=1&&0===P[y];y--);if(k>y&&(k=y),0===y)return n[a++]=20971520,n[a++]=20971520,o.bits=1,0;for(m=1;m<y&&0===P[m];m++);for(k<m&&(k=m),E=1,v=1;v<=15;v++)if(E<<=1,(E-=P[v])<0)return-1;if(E>0&&(0===t||1!==y))return-1;for(M[1]=0,v=1;v<15;v++)M[v+1]=M[v]+P[v];for(b=0;b<i;b++)0!==e[r+b]&&(s[M[e[r+b]]++]=b);if(0===t?(U=T=s,c=19):1===t?(U=de,B-=257,T=ue,R-=257,c=256):(U=ce,T=pe,c=-1),z=0,b=0,v=m,u=a,x=k,A=0,l=-1,d=(I=1<<k)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){p=v-A,s[b]<c?(g=0,w=s[b]):s[b]>c?(g=T[R+s[b]],w=U[B+s[b]]):(g=96,w=0),h=1<<v-A,m=f=1<<x;do{n[u+(z>>A)+(f-=h)]=p<<24|g<<16|w|0}while(0!==f);for(h=1<<v-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,b++,0==--P[v]){if(v===y)break;v=e[r+s[b]]}if(v>k&&(z&d)!==l){for(0===A&&(A=k),u+=m,E=1<<(x=v-A);x+A<y&&!((E-=P[x+A])<=0);)x++,E<<=1;if(I+=1<<x,1===t&&I>852||2===t&&I>592)return 1;n[l=z&d]=k<<24|x<<16|u-a|0}}return 0!==z&&(n[u+z]=v-A<<24|64<<16|0),o.bits=k,0};function me(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ge.Buf16(320),this.work=new ge.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ke(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new ge.Buf32(852),e.distcode=e.distdyn=new ge.Buf32(592),e.sane=1,e.back=-1,0):-2}function xe(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ke(t)):-2}function Ae(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,xe(t))):-2}function Ee(t,e){var r,i;return t?(i=new ye,t.state=i,i.window=null,0!==(r=Ae(t,e))&&(t.state=null),r):-2}var Ie,ze,Ue=!0;function Be(t){if(Ue){var e;for(Ie=new ge.Buf32(512),ze=new ge.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(be(1,t.lens,0,288,Ie,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;be(2,t.lens,0,32,ze,0,t.work,{bits:5}),Ue=!1}t.lencode=Ie,t.lenbits=9,t.distcode=ze,t.distbits=5}function Pe(t,e,r,i){var n,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new ge.Buf8(a.wsize)),i>=a.wsize?(ge.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((n=a.wsize-a.wnext)>i&&(n=i),ge.arraySet(a.window,e,r-i,n,a.wnext),(i-=n)?(ge.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}fe.inflateReset=xe,fe.inflateReset2=Ae,fe.inflateResetKeep=ke,fe.inflateInit=function(t){return Ee(t,15)},fe.inflateInit2=Ee,fe.inflate=function(t,e){var r,i,n,a,s,o,h,f,l,d,u,c,p,g,w,_,v,b,m,y,k,x,A,E,I=0,z=new ge.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),s=t.next_out,n=t.output,h=t.avail_out,a=t.next_in,i=t.input,o=t.avail_in,f=r.hold,l=r.bits,d=o,u=h,x=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(2&r.wrap&&35615===f){r.check=0,z[0]=255&f,z[1]=f>>>8&255,r.check=_e(r.check,z,2,0),f=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&f)){t.msg="unknown compression method",r.mode=30;break}if(l-=4,k=8+(15&(f>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&f?10:12,f=0,l=0;break;case 2:for(;l<16;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(r.flags=f,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(z[0]=255&f,z[1]=f>>>8&255,r.check=_e(r.check,z,2,0)),f=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}r.head&&(r.head.time=f),512&r.flags&&(z[0]=255&f,z[1]=f>>>8&255,z[2]=f>>>16&255,z[3]=f>>>24&255,r.check=_e(r.check,z,4,0)),f=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(z[0]=255&f,z[1]=f>>>8&255,r.check=_e(r.check,z,2,0)),f=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(z[0]=255&f,z[1]=f>>>8&255,r.check=_e(r.check,z,2,0)),f=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((c=r.length)>o&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),ge.arraySet(r.head.extra,i,a,c,k)),512&r.flags&&(r.check=_e(r.check,i,c,a)),o-=c,a+=c,r.length-=c),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;c=0;do{k=i[a+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&c<o);if(512&r.flags&&(r.check=_e(r.check,i,c,a)),o-=c,a+=c,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;c=0;do{k=i[a+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&c<o);if(512&r.flags&&(r.check=_e(r.check,i,c,a)),o-=c,a+=c,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(f!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}f=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}t.adler=r.check=me(f),f=0,l=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=s,t.avail_out=h,t.next_in=a,t.avail_in=o,r.hold=f,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){f>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}switch(r.last=1&f,l-=1,3&(f>>>=1)){case 0:r.mode=14;break;case 1:if(Be(r),r.mode=20,6===e){f>>>=2,l-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}f>>>=2,l-=2;break;case 14:for(f>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if((65535&f)!=(f>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&f,f=0,l=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(c=r.length){if(c>o&&(c=o),c>h&&(c=h),0===c)break t;ge.arraySet(n,i,a,c,s),o-=c,a+=c,h-=c,s+=c,r.length-=c;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(r.nlen=257+(31&f),f>>>=5,l-=5,r.ndist=1+(31&f),f>>>=5,l-=5,r.ncode=4+(15&f),f>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}r.lens[U[r.have++]]=7&f,f>>>=3,l-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},x=be(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,x){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;_=(I=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,v=65535&I,!((w=I>>>24)<=l);){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(v<16)f>>>=w,l-=w,r.lens[r.have++]=v;else{if(16===v){for(E=w+2;l<E;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(f>>>=w,l-=w,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&f),f>>>=2,l-=2}else if(17===v){for(E=w+3;l<E;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}l-=w,k=0,c=3+(7&(f>>>=w)),f>>>=3,l-=3}else{for(E=w+7;l<E;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}l-=w,k=0,c=11+(127&(f>>>=w)),f>>>=7,l-=7}if(r.have+c>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,A={bits:r.lenbits},x=be(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,x){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},x=be(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,x){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(o>=6&&h>=258){t.next_out=s,t.avail_out=h,t.next_in=a,t.avail_in=o,r.hold=f,r.bits=l,ve(t,u),s=t.next_out,n=t.output,h=t.avail_out,a=t.next_in,i=t.input,o=t.avail_in,f=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;_=(I=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,v=65535&I,!((w=I>>>24)<=l);){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(_&&0==(240&_)){for(b=w,m=_,y=v;_=(I=r.lencode[y+((f&(1<<b+m)-1)>>b)])>>>16&255,v=65535&I,!(b+(w=I>>>24)<=l);){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}f>>>=b,l-=b,r.back+=b}if(f>>>=w,l-=w,r.back+=w,r.length=v,0===_){r.mode=26;break}if(32&_){r.back=-1,r.mode=12;break}if(64&_){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&_,r.mode=22;case 22:if(r.extra){for(E=r.extra;l<E;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;_=(I=r.distcode[f&(1<<r.distbits)-1])>>>16&255,v=65535&I,!((w=I>>>24)<=l);){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(0==(240&_)){for(b=w,m=_,y=v;_=(I=r.distcode[y+((f&(1<<b+m)-1)>>b)])>>>16&255,v=65535&I,!(b+(w=I>>>24)<=l);){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}f>>>=b,l-=b,r.back+=b}if(f>>>=w,l-=w,r.back+=w,64&_){t.msg="invalid distance code",r.mode=30;break}r.offset=v,r.extra=15&_,r.mode=24;case 24:if(r.extra){for(E=r.extra;l<E;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(c=u-h,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}c>r.wnext?(c-=r.wnext,p=r.wsize-c):p=r.wnext-c,c>r.length&&(c=r.length),g=r.window}else g=n,p=s-r.offset,c=r.length;c>h&&(c=h),h-=c,r.length-=c;do{n[s++]=g[p++]}while(--c);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[s++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break t;o--,f|=i[a++]<<l,l+=8}if(u-=h,t.total_out+=u,r.total+=u,u&&(t.adler=r.check=r.flags?_e(r.check,n,u,s-u):we(r.check,n,u,s-u)),u=h,(r.flags?f:me(f))!==r.check){t.msg="incorrect data check",r.mode=30;break}f=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,f+=i[a++]<<l,l+=8}if(f!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}f=0,l=0}r.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;default:return-2}return t.next_out=s,t.avail_out=h,t.next_in=a,t.avail_in=o,r.hold=f,r.bits=l,(r.wsize||u!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Pe(t,t.output,t.next_out,u-t.avail_out),d-=t.avail_in,u-=t.avail_out,t.total_in+=d,t.total_out+=u,r.total+=u,r.wrap&&u&&(t.adler=r.check=r.flags?_e(r.check,n,u,t.next_out-u):we(r.check,n,u,t.next_out-u)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===d&&0===u||4===e)&&0===x&&(x=-5),x},fe.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},fe.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},fe.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&we(1,e,i,0)!==r.check?-3:Pe(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,0):-2},fe.inflateInfo="pako inflate (from Nodeca project)";var Me={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Te=fe,Re=D,Se=jt,Ce=Me,Le=At,De=Qt,He=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Ne=Object.prototype.toString;function Ge(t){if(!(this instanceof Ge))return new Ge(t);this.options=Re.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new De,this.strm.avail_out=0;var r=Te.inflateInit2(this.strm,e.windowBits);if(r!==Ce.Z_OK)throw new Error(Le[r]);if(this.header=new He,Te.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Se.string2buf(e.dictionary):"[object ArrayBuffer]"===Ne.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Te.inflateSetDictionary(this.strm,e.dictionary))!==Ce.Z_OK))throw new Error(Le[r])}function Oe(t,e){var r=new Ge(e);if(r.push(t,!0),r.err)throw r.msg||Le[r.err];return r.result}Ge.prototype.push=function(t,e){var r,i,n,a,s,o=this.strm,h=this.options.chunkSize,f=this.options.dictionary,l=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?Ce.Z_FINISH:Ce.Z_NO_FLUSH,"string"==typeof t?o.input=Se.binstring2buf(t):"[object ArrayBuffer]"===Ne.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Re.Buf8(h),o.next_out=0,o.avail_out=h),(r=Te.inflate(o,Ce.Z_NO_FLUSH))===Ce.Z_NEED_DICT&&f&&(r=Te.inflateSetDictionary(this.strm,f)),r===Ce.Z_BUF_ERROR&&!0===l&&(r=Ce.Z_OK,l=!1),r!==Ce.Z_STREAM_END&&r!==Ce.Z_OK)return this.onEnd(r),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&r!==Ce.Z_STREAM_END&&(0!==o.avail_in||i!==Ce.Z_FINISH&&i!==Ce.Z_SYNC_FLUSH)||("string"===this.options.to?(n=Se.utf8border(o.output,o.next_out),a=o.next_out-n,s=Se.buf2string(o.output,n),o.next_out=a,o.avail_out=h-a,a&&Re.arraySet(o.output,o.output,n,a,0),this.onData(s)):this.onData(Re.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(l=!0)}while((o.avail_in>0||0===o.avail_out)&&r!==Ce.Z_STREAM_END);return r===Ce.Z_STREAM_END&&(i=Ce.Z_FINISH),i===Ce.Z_FINISH?(r=Te.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ce.Z_OK):i!==Ce.Z_SYNC_FLUSH||(this.onEnd(Ce.Z_OK),o.avail_out=0,!0)},Ge.prototype.onData=function(t){this.chunks.push(t)},Ge.prototype.onEnd=function(t){t===Ce.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Re.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},he.Inflate=Ge,he.inflate=Oe,he.inflateRaw=function(t,e){return(e=e||{}).raw=!0,Oe(t,e)},he.ungzip=Oe;var Fe={};(0,D.assign)(Fe,H,he,Me);var Ze,qe,Ve,je=Fe,Xe={};Xe.toRGBA8=function(t){var e=t.width,r=t.height;if(null==t.tabs.acTL)return[Xe.toRGBA8.decodeImage(t.data,e,r,t).buffer];var i=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var n=e*r*4,a=new Uint8Array(n),s=new Uint8Array(n),o=new Uint8Array(n),h=0;h<t.frames.length;h++){var f=t.frames[h],l=f.rect.x,d=f.rect.y,u=f.rect.width,c=f.rect.height,p=Xe.toRGBA8.decodeImage(f.data,u,c,t);if(0!=h)for(var g=0;g<n;g++)o[g]=a[g];if(0==f.blend?Xe._copyTile(p,u,c,a,e,r,l,d,0):1==f.blend&&Xe._copyTile(p,u,c,a,e,r,l,d,1),i.push(a.buffer.slice(0)),0==f.dispose);else if(1==f.dispose)Xe._copyTile(s,u,c,a,e,r,l,d,0);else if(2==f.dispose)for(g=0;g<n;g++)a[g]=o[g]}return i},Xe.toRGBA8.decodeImage=function(t,e,r,i){var n=e*r,a=Xe.decode._getBPP(i),s=Math.ceil(e*a/8),o=new Uint8Array(4*n),h=new Uint32Array(o.buffer),f=i.ctype,l=i.depth,d=Xe._bin.readUshort;if(6==f){var u=n<<2;if(8==l)for(var c=0;c<u;c+=4)o[c]=t[c],o[c+1]=t[c+1],o[c+2]=t[c+2],o[c+3]=t[c+3];if(16==l)for(c=0;c<u;c++)o[c]=t[c<<1]}else if(2==f){var p=i.tabs.tRNS;if(null==p){if(8==l)for(c=0;c<n;c++){var g=3*c;h[c]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g]}if(16==l)for(c=0;c<n;c++){g=6*c;h[c]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g]}}else{var w=p[0],_=p[1],v=p[2];if(8==l)for(c=0;c<n;c++){var b=c<<2;g=3*c;h[c]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g],t[g]==w&&t[g+1]==_&&t[g+2]==v&&(o[b+3]=0)}if(16==l)for(c=0;c<n;c++){b=c<<2,g=6*c;h[c]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g],d(t,g)==w&&d(t,g+2)==_&&d(t,g+4)==v&&(o[b+3]=0)}}}else if(3==f){var m=i.tabs.PLTE,y=i.tabs.tRNS,k=y?y.length:0;if(1==l)for(var x=0;x<r;x++){var A=x*s,E=x*e;for(c=0;c<e;c++){b=E+c<<2;var I=3*(z=t[A+(c>>3)]>>7-((7&c)<<0)&1);o[b]=m[I],o[b+1]=m[I+1],o[b+2]=m[I+2],o[b+3]=z<k?y[z]:255}}if(2==l)for(x=0;x<r;x++)for(A=x*s,E=x*e,c=0;c<e;c++){b=E+c<<2,I=3*(z=t[A+(c>>2)]>>6-((3&c)<<1)&3);o[b]=m[I],o[b+1]=m[I+1],o[b+2]=m[I+2],o[b+3]=z<k?y[z]:255}if(4==l)for(x=0;x<r;x++)for(A=x*s,E=x*e,c=0;c<e;c++){b=E+c<<2,I=3*(z=t[A+(c>>1)]>>4-((1&c)<<2)&15);o[b]=m[I],o[b+1]=m[I+1],o[b+2]=m[I+2],o[b+3]=z<k?y[z]:255}if(8==l)for(c=0;c<n;c++){var z;b=c<<2,I=3*(z=t[c]);o[b]=m[I],o[b+1]=m[I+1],o[b+2]=m[I+2],o[b+3]=z<k?y[z]:255}}else if(4==f){if(8==l)for(c=0;c<n;c++){b=c<<2;var U=t[B=c<<1];o[b]=U,o[b+1]=U,o[b+2]=U,o[b+3]=t[B+1]}if(16==l)for(c=0;c<n;c++){var B;b=c<<2,U=t[B=c<<2];o[b]=U,o[b+1]=U,o[b+2]=U,o[b+3]=t[B+2]}}else if(0==f)for(w=i.tabs.tRNS?i.tabs.tRNS:-1,x=0;x<r;x++){var P=x*s,M=x*e;if(1==l)for(var T=0;T<e;T++){var R=(U=255*(t[P+(T>>>3)]>>>7-(7&T)&1))==255*w?0:255;h[M+T]=R<<24|U<<16|U<<8|U}else if(2==l)for(T=0;T<e;T++){R=(U=85*(t[P+(T>>>2)]>>>6-((3&T)<<1)&3))==85*w?0:255;h[M+T]=R<<24|U<<16|U<<8|U}else if(4==l)for(T=0;T<e;T++){R=(U=17*(t[P+(T>>>1)]>>>4-((1&T)<<2)&15))==17*w?0:255;h[M+T]=R<<24|U<<16|U<<8|U}else if(8==l)for(T=0;T<e;T++){R=(U=t[P+T])==w?0:255;h[M+T]=R<<24|U<<16|U<<8|U}else if(16==l)for(T=0;T<e;T++){U=t[P+(T<<1)],R=d(t,P+(T<<c))==w?0:255;h[M+T]=R<<24|U<<16|U<<8|U}}return o},Xe.decode=function(t){for(var e,r=new Uint8Array(t),i=8,n=Xe._bin,a=n.readUshort,s=n.readUint,o={tabs:{},frames:[]},h=new Uint8Array(r.length),f=0,l=0,d=[137,80,78,71,13,10,26,10],u=0;u<8;u++)if(r[u]!=d[u])throw"The input is not a PNG file!";for(;i<r.length;){var c=n.readUint(r,i);i+=4;var p=n.readASCII(r,i,4);if(i+=4,"IHDR"==p)Xe.decode._IHDR(r,i,o);else if("IDAT"==p){for(u=0;u<c;u++)h[f+u]=r[i+u];f+=c}else if("acTL"==p)o.tabs[p]={num_frames:s(r,i),num_plays:s(r,i+4)},e=new Uint8Array(r.length);else if("fcTL"==p){var g;if(0!=l)(g=o.frames[o.frames.length-1]).data=Xe.decode._decompress(o,e.slice(0,l),g.rect.width,g.rect.height),l=0;var w={x:s(r,i+12),y:s(r,i+16),width:s(r,i+4),height:s(r,i+8)},_=a(r,i+22);_=a(r,i+20)/(0==_?100:_);var v={rect:w,delay:Math.round(1e3*_),dispose:r[i+24],blend:r[i+25]};o.frames.push(v)}else if("fdAT"==p){for(u=0;u<c-4;u++)e[l+u]=r[i+u+4];l+=c-4}else if("pHYs"==p)o.tabs[p]=[n.readUint(r,i),n.readUint(r,i+4),r[i+8]];else if("cHRM"==p){o.tabs[p]=[];for(u=0;u<8;u++)o.tabs[p].push(n.readUint(r,i+4*u))}else if("tEXt"==p){null==o.tabs[p]&&(o.tabs[p]={});var b=n.nextZero(r,i),m=n.readASCII(r,i,b-i),y=n.readASCII(r,b+1,i+c-b-1);o.tabs[p][m]=y}else if("iTXt"==p){null==o.tabs[p]&&(o.tabs[p]={});b=0;var k=i;b=n.nextZero(r,k);m=n.readASCII(r,k,b-k);r[k=b+1],r[k+1],k+=2,b=n.nextZero(r,k),n.readASCII(r,k,b-k),k=b+1,b=n.nextZero(r,k),n.readUTF8(r,k,b-k),k=b+1;y=n.readUTF8(r,k,c-(k-i));o.tabs[p][m]=y}else if("PLTE"==p)o.tabs[p]=n.readBytes(r,i,c);else if("hIST"==p){var x=o.tabs.PLTE.length/3;o.tabs[p]=[];for(u=0;u<x;u++)o.tabs[p].push(a(r,i+2*u))}else if("tRNS"==p)3==o.ctype?o.tabs[p]=n.readBytes(r,i,c):0==o.ctype?o.tabs[p]=a(r,i):2==o.ctype&&(o.tabs[p]=[a(r,i),a(r,i+2),a(r,i+4)]);else if("gAMA"==p)o.tabs[p]=n.readUint(r,i)/1e5;else if("sRGB"==p)o.tabs[p]=r[i];else if("bKGD"==p)0==o.ctype||4==o.ctype?o.tabs[p]=[a(r,i)]:2==o.ctype||6==o.ctype?o.tabs[p]=[a(r,i),a(r,i+2),a(r,i+4)]:3==o.ctype&&(o.tabs[p]=r[i]);else if("IEND"==p)break;i+=c,n.readUint(r,i),i+=4}0!=l&&((g=o.frames[o.frames.length-1]).data=Xe.decode._decompress(o,e.slice(0,l),g.rect.width,g.rect.height),l=0);return o.data=Xe.decode._decompress(o,h,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},Xe.decode._decompress=function(t,e,r,i){var n=Xe.decode._getBPP(t),a=Math.ceil(r*n/8),s=new Uint8Array((a+1+t.interlace)*i);return e=Xe.decode._inflate(e,s),0==t.interlace?e=Xe.decode._filterZero(e,t,0,r,i):1==t.interlace&&(e=Xe.decode._readInterlace(e,t)),e},Xe.decode._inflate=function(t,e){return Xe.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e)},Xe.inflateRaw=((Ve={}).H={},Ve.H.N=function(t,e){var r,i,n=Uint8Array,a=0,s=0,o=0,h=0,f=0,l=0,d=0,u=0,c=0;if(3==t[0]&&0==t[1])return e||new n(0);var p=Ve.H,g=p.b,w=p.e,_=p.R,v=p.n,b=p.A,m=p.Z,y=p.m,k=null==e;for(k&&(e=new n(t.length>>>2<<3));0==a;)if(a=g(t,c,1),s=g(t,c+1,2),c+=3,0!=s){if(k&&(e=Ve.H.W(e,u+(1<<17))),1==s&&(r=y.J,i=y.h,l=511,d=31),2==s){o=w(t,c,5)+257,h=w(t,c+5,5)+1,f=w(t,c+10,4)+4,c+=14;for(var x=1,A=0;A<38;A+=2)y.Q[A]=0,y.Q[A+1]=0;for(A=0;A<f;A++){var E=w(t,c+3*A,3);y.Q[1+(y.X[A]<<1)]=E,E>x&&(x=E)}c+=3*f,v(y.Q,x),b(y.Q,x,y.u),r=y.w,i=y.d,c=_(y.u,(1<<x)-1,o+h,t,c,y.v);var I=p.V(y.v,0,o,y.C);l=(1<<I)-1;var z=p.V(y.v,o,h,y.D);d=(1<<z)-1,v(y.C,I),b(y.C,I,r),v(y.D,z),b(y.D,z,i)}for(;;){var U=r[m(t,c)&l];c+=15&U;var B=U>>>4;if(B>>>8==0)e[u++]=B;else{if(256==B)break;var P=u+B-254;if(B>264){var M=y.q[B-257];P=u+(M>>>3)+w(t,c,7&M),c+=7&M}var T=i[m(t,c)&d];c+=15&T;var R=T>>>4,S=y.c[R],C=(S>>>4)+g(t,c,15&S);for(c+=15&S;u<P;)e[u]=e[u++-C],e[u]=e[u++-C],e[u]=e[u++-C],e[u]=e[u++-C];u=P}}}else{0!=(7&c)&&(c+=8-(7&c));var L=4+(c>>>3),D=t[L-4]|t[L-3]<<8;k&&(e=Ve.H.W(e,u+D)),e.set(new n(t.buffer,t.byteOffset+L,D),u),c=L+D<<3,u+=D}return e.length==u?e:e.slice(0,u)},Ve.H.W=function(t,e){var r=t.length;if(e<=r)return t;var i=new Uint8Array(r<<1);return i.set(t,0),i},Ve.H.R=function(t,e,r,i,n,a){for(var s=Ve.H.e,o=Ve.H.Z,h=0;h<r;){var f=t[o(i,n)&e];n+=15&f;var l=f>>>4;if(l<=15)a[h]=l,h++;else{var d=0,u=0;16==l?(u=3+s(i,n,2),n+=2,d=a[h-1]):17==l?(u=3+s(i,n,3),n+=3):18==l&&(u=11+s(i,n,7),n+=7);for(var c=h+u;h<c;)a[h]=d,h++}}return n},Ve.H.V=function(t,e,r,i){for(var n=0,a=0,s=i.length>>>1;a<r;){var o=t[a+e];i[a<<1]=0,i[1+(a<<1)]=o,o>n&&(n=o),a++}for(;a<s;)i[a<<1]=0,i[1+(a<<1)]=0,a++;return n},Ve.H.n=function(t,e){for(var r,i,n,a,s=Ve.H.m,o=t.length,h=s.j,f=0;f<=e;f++)h[f]=0;for(f=1;f<o;f+=2)h[t[f]]++;var l=s.K;for(r=0,h[0]=0,i=1;i<=e;i++)r=r+h[i-1]<<1,l[i]=r;for(n=0;n<o;n+=2)0!=(a=t[n+1])&&(t[n]=l[a],l[a]++)},Ve.H.A=function(t,e,r){for(var i=t.length,n=Ve.H.m.r,a=0;a<i;a+=2)if(0!=t[a+1])for(var s=a>>1,o=t[a+1],h=s<<4|o,f=e-o,l=t[a]<<f,d=l+(1<<f);l!=d;)r[n[l]>>>15-e]=h,l++},Ve.H.l=function(t,e){for(var r=Ve.H.m.r,i=15-e,n=0;n<t.length;n+=2){var a=t[n]<<e-t[n+1];t[n]=r[a]>>>i}},Ve.H.M=function(t,e,r){r<<=7&e;var i=e>>>3;t[i]|=r,t[i+1]|=r>>>8},Ve.H.I=function(t,e,r){r<<=7&e;var i=e>>>3;t[i]|=r,t[i+1]|=r>>>8,t[i+2]|=r>>>16},Ve.H.e=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},Ve.H.b=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},Ve.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},Ve.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},Ve.H.m=(Ze=Uint16Array,qe=Uint32Array,{K:new Ze(16),j:new Ze(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new Ze(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new qe(32),J:new Ze(512),_:[],h:new Ze(32),$:[],w:new Ze(32768),C:[],v:[],d:new Ze(32768),D:[],u:new Ze(512),Q:[],r:new Ze(32768),s:new qe(286),Y:new qe(30),a:new qe(19),t:new qe(15e3),k:new Ze(65536),g:new Ze(32768)}),function(){for(var t=Ve.H.m,e=0;e<32768;e++){var r=e;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.r[e]=(r>>>16|r<<16)>>>17}function i(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.q[e]=t.S[e]<<3|t.T[e],t.c[e]=t.p[e]<<4|t.z[e];i(t._,144,8),i(t._,112,9),i(t._,24,7),i(t._,8,8),Ve.H.n(t._,9),Ve.H.A(t._,9,t.J),Ve.H.l(t._,9),i(t.$,32,5),Ve.H.n(t.$,5),Ve.H.A(t.$,5,t.h),Ve.H.l(t.$,5),i(t.Q,19,0),i(t.C,286,0),i(t.D,30,0),i(t.v,320,0)}(),Ve.H.N),Xe.decode._readInterlace=function(t,e){for(var r=e.width,i=e.height,n=Xe.decode._getBPP(e),a=n>>3,s=Math.ceil(r*n/8),o=new Uint8Array(i*s),h=0,f=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],u=[8,8,4,4,2,2,1],c=0;c<7;){for(var p=d[c],g=u[c],w=0,_=0,v=f[c];v<i;)v+=p,_++;for(var b=l[c];b<r;)b+=g,w++;var m=Math.ceil(w*n/8);Xe.decode._filterZero(t,e,h,w,_);for(var y=0,k=f[c];k<i;){for(var x=l[c],A=h+y*m<<3;x<r;){var E;if(1==n)E=(E=t[A>>3])>>7-(7&A)&1,o[k*s+(x>>3)]|=E<<7-((7&x)<<0);if(2==n)E=(E=t[A>>3])>>6-(7&A)&3,o[k*s+(x>>2)]|=E<<6-((3&x)<<1);if(4==n)E=(E=t[A>>3])>>4-(7&A)&15,o[k*s+(x>>1)]|=E<<4-((1&x)<<2);if(n>=8)for(var I=k*s+x*a,z=0;z<a;z++)o[I+z]=t[(A>>3)+z];A+=n,x+=g}y++,k+=p}w*_!=0&&(h+=_*(1+m)),c+=1}return o},Xe.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},Xe.decode._filterZero=function(t,e,r,i,n){var a=Xe.decode._getBPP(e),s=Math.ceil(i*a/8),o=Xe.decode._paeth;a=Math.ceil(a/8);var h=0,f=1,l=t[r],d=0;if(l>1&&(t[r]=[0,0,1][l-2]),3==l)for(d=a;d<s;d++)t[d+1]=t[d+1]+(t[d+1-a]>>>1)&255;for(var u=0;u<n;u++)if(d=0,0==(l=t[(f=(h=r+u*s)+u+1)-1]))for(;d<s;d++)t[h+d]=t[f+d];else if(1==l){for(;d<a;d++)t[h+d]=t[f+d];for(;d<s;d++)t[h+d]=t[f+d]+t[h+d-a]}else if(2==l)for(;d<s;d++)t[h+d]=t[f+d]+t[h+d-s];else if(3==l){for(;d<a;d++)t[h+d]=t[f+d]+(t[h+d-s]>>>1);for(;d<s;d++)t[h+d]=t[f+d]+(t[h+d-s]+t[h+d-a]>>>1)}else{for(;d<a;d++)t[h+d]=t[f+d]+o(0,t[h+d-s],0);for(;d<s;d++)t[h+d]=t[f+d]+o(t[h+d-a],t[h+d-s],t[h+d-a-s])}return t},Xe.decode._paeth=function(t,e,r){var i=t+e-r,n=i-t,a=i-e,s=i-r;return n*n<=a*a&&n*n<=s*s?t:a*a<=s*s?e:r},Xe.decode._IHDR=function(t,e,r){var i=Xe._bin;r.width=i.readUint(t,e),e+=4,r.height=i.readUint(t,e),e+=4,r.depth=t[e],e++,r.ctype=t[e],e++,r.compress=t[e],e++,r.filter=t[e],e++,r.interlace=t[e],e++},Xe._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},readASCII:function(t,e,r){for(var i="",n=0;n<r;n++)i+=String.fromCharCode(t[e+n]);return i},writeASCII:function(t,e,r){for(var i=0;i<r.length;i++)t[e+i]=r.charCodeAt(i)},readBytes:function(t,e,r){for(var i=[],n=0;n<r;n++)i.push(t[e+n]);return i},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var i,n="",a=0;a<r;a++)n+="%"+Xe._bin.pad(t[e+a].toString(16));try{i=decodeURIComponent(n)}catch(i){return Xe._bin.readASCII(t,e,r)}return i}},Xe._copyTile=function(t,e,r,i,n,a,s,o,h){for(var f=Math.min(e,n),l=Math.min(r,a),d=0,u=0,c=0;c<l;c++)for(var p=0;p<f;p++)if(s>=0&&o>=0?(d=c*e+p<<2,u=(o+c)*n+s+p<<2):(d=(-o+c)*e-s+p<<2,u=c*n+p<<2),0==h)i[u]=t[d],i[u+1]=t[d+1],i[u+2]=t[d+2],i[u+3]=t[d+3];else if(1==h){var g=t[d+3]*(1/255),w=t[d]*g,_=t[d+1]*g,v=t[d+2]*g,b=i[u+3]*(1/255),m=i[u]*b,y=i[u+1]*b,k=i[u+2]*b,x=1-g,A=g+b*x,E=0==A?0:1/A;i[u+3]=255*A,i[u+0]=(w+m*x)*E,i[u+1]=(_+y*x)*E,i[u+2]=(v+k*x)*E}else if(2==h){g=t[d+3],w=t[d],_=t[d+1],v=t[d+2],b=i[u+3],m=i[u],y=i[u+1],k=i[u+2];g==b&&w==m&&_==y&&v==k?(i[u]=0,i[u+1]=0,i[u+2]=0,i[u+3]=0):(i[u]=w,i[u+1]=_,i[u+2]=v,i[u+3]=g)}else if(3==h){g=t[d+3],w=t[d],_=t[d+1],v=t[d+2],b=i[u+3],m=i[u],y=i[u+1],k=i[u+2];if(g==b&&w==m&&_==y&&v==k)continue;if(g<220&&b>20)return!1}return!0},Xe.encode=function(t,e,r,i,n,a,s){null==i&&(i=0),null==s&&(s=!1);var o=Xe.encode.compress(t,e,r,i,[!1,!1,!1,0,s]);return Xe.encode.compressPNG(o,-1),Xe.encode._main(o,e,r,n,a)},Xe.encodeLL=function(t,e,r,i,n,a,s,o){for(var h={ctype:0+(1==i?0:2)+(0==n?0:4),depth:a,frames:[]},f=(i+n)*a,l=f*e,d=0;d<t.length;d++)h.frames.push({rect:{x:0,y:0,width:e,height:r},img:new Uint8Array(t[d]),blend:0,dispose:1,bpp:Math.ceil(f/8),bpl:Math.ceil(l/8)});return Xe.encode.compressPNG(h,0,!0),Xe.encode._main(h,e,r,s,o)},Xe.encode._main=function(t,e,r,i,n){null==n&&(n={});var a=Xe.crc.crc,s=Xe._bin.writeUint,o=Xe._bin.writeUshort,h=Xe._bin.writeASCII,f=8,l=t.frames.length>1,d=!1,u=33+(l?20:0);if(null!=n.sRGB&&(u+=13),null!=n.pHYs&&(u+=21),3==t.ctype){for(var c=t.plte.length,p=0;p<c;p++)t.plte[p]>>>24!=255&&(d=!0);u+=8+3*c+4+(d?8+1*c+4:0)}for(var g=0;g<t.frames.length;g++){l&&(u+=38),u+=(A=t.frames[g]).cimg.length+12,0!=g&&(u+=4)}u+=12;var w=new Uint8Array(u),_=[137,80,78,71,13,10,26,10];for(p=0;p<8;p++)w[p]=_[p];if(s(w,f,13),h(w,f+=4,"IHDR"),s(w,f+=4,e),s(w,f+=4,r),w[f+=4]=t.depth,w[++f]=t.ctype,w[++f]=0,w[++f]=0,w[++f]=0,s(w,++f,a(w,f-17,17)),f+=4,null!=n.sRGB&&(s(w,f,1),h(w,f+=4,"sRGB"),w[f+=4]=n.sRGB,s(w,++f,a(w,f-5,5)),f+=4),null!=n.pHYs&&(s(w,f,9),h(w,f+=4,"pHYs"),s(w,f+=4,n.pHYs[0]),s(w,f+=4,n.pHYs[1]),w[f+=4]=n.pHYs[2],s(w,++f,a(w,f-13,13)),f+=4),l&&(s(w,f,8),h(w,f+=4,"acTL"),s(w,f+=4,t.frames.length),s(w,f+=4,null!=n.loop?n.loop:0),s(w,f+=4,a(w,f-12,12)),f+=4),3==t.ctype){s(w,f,3*(c=t.plte.length)),h(w,f+=4,"PLTE"),f+=4;for(p=0;p<c;p++){var v=3*p,b=t.plte[p],m=255&b,y=b>>>8&255,k=b>>>16&255;w[f+v+0]=m,w[f+v+1]=y,w[f+v+2]=k}if(s(w,f+=3*c,a(w,f-3*c-4,3*c+4)),f+=4,d){s(w,f,c),h(w,f+=4,"tRNS"),f+=4;for(p=0;p<c;p++)w[f+p]=t.plte[p]>>>24&255;s(w,f+=c,a(w,f-c-4,c+4)),f+=4}}var x=0;for(g=0;g<t.frames.length;g++){var A=t.frames[g];l&&(s(w,f,26),h(w,f+=4,"fcTL"),s(w,f+=4,x++),s(w,f+=4,A.rect.width),s(w,f+=4,A.rect.height),s(w,f+=4,A.rect.x),s(w,f+=4,A.rect.y),o(w,f+=4,i[g]),o(w,f+=2,1e3),w[f+=2]=A.dispose,w[++f]=A.blend,s(w,++f,a(w,f-30,30)),f+=4);var E=A.cimg;s(w,f,(c=E.length)+(0==g?0:4));var I=f+=4;h(w,f,0==g?"IDAT":"fdAT"),f+=4,0!=g&&(s(w,f,x++),f+=4),w.set(E,f),s(w,f+=c,a(w,I,f-I)),f+=4}return s(w,f,0),h(w,f+=4,"IEND"),s(w,f+=4,a(w,f-4,4)),f+=4,w.buffer},Xe.encode.compressPNG=function(t,e,r){for(var i=0;i<t.frames.length;i++){var n=t.frames[i];n.rect.width;var a=n.rect.height,s=new Uint8Array(a*n.bpl+a);n.cimg=Xe.encode._filterZero(n.img,a,n.bpp,n.bpl,s,e,r)}},Xe.encode.compress=function(t,e,r,i,n){for(var a=n[0],s=n[1],o=n[2],h=n[3],f=n[4],l=6,d=8,u=255,c=0;c<t.length;c++)for(var p=new Uint8Array(t[c]),g=p.length,w=0;w<g;w+=4)u&=p[w+3];var _=255!=u,v=Xe.encode.framize(t,e,r,a,s,o),b={},m=[],y=[];if(0!=i){var k=[];for(w=0;w<v.length;w++)k.push(v[w].img.buffer);var x=Xe.encode.concatRGBA(k),A=Xe.quantize(x,i),E=0,I=new Uint8Array(A.abuf);for(w=0;w<v.length;w++){var z=(V=v[w].img).length;y.push(new Uint8Array(A.inds.buffer,E>>2,z>>2));for(c=0;c<z;c+=4)V[c]=I[E+c],V[c+1]=I[E+c+1],V[c+2]=I[E+c+2],V[c+3]=I[E+c+3];E+=z}for(w=0;w<A.plte.length;w++)m.push(A.plte[w].est.rgba)}else for(c=0;c<v.length;c++){var U=v[c],B=new Uint32Array(U.img.buffer),P=U.rect.width,M=(g=B.length,new Uint8Array(g));y.push(M);for(w=0;w<g;w++){var T=B[w];if(0!=w&&T==B[w-1])M[w]=M[w-1];else if(w>P&&T==B[w-P])M[w]=M[w-P];else{var R=b[T];if(null==R&&(b[T]=R=m.length,m.push(T),m.length>=300))break;M[w]=R}}}var S=m.length;S<=256&&0==f&&(d=S<=2?1:S<=4?2:S<=16?4:8,d=Math.max(d,h));for(c=0;c<v.length;c++){(U=v[c]).rect.x,U.rect.y;P=U.rect.width;var C=U.rect.height,L=U.img;new Uint32Array(L.buffer);var D=4*P,H=4;if(S<=256&&0==f){D=Math.ceil(d*P/8);for(var N=new Uint8Array(D*C),G=y[c],O=0;O<C;O++){w=O*D;var F=O*P;if(8==d)for(var Z=0;Z<P;Z++)N[w+Z]=G[F+Z];else if(4==d)for(Z=0;Z<P;Z++)N[w+(Z>>1)]|=G[F+Z]<<4-4*(1&Z);else if(2==d)for(Z=0;Z<P;Z++)N[w+(Z>>2)]|=G[F+Z]<<6-2*(3&Z);else if(1==d)for(Z=0;Z<P;Z++)N[w+(Z>>3)]|=G[F+Z]<<7-1*(7&Z)}L=N,l=3,H=1}else if(0==_&&1==v.length){N=new Uint8Array(P*C*3);var q=P*C;for(w=0;w<q;w++){var V,j=4*w;N[V=3*w]=L[j],N[V+1]=L[j+1],N[V+2]=L[j+2]}L=N,l=2,H=3,D=3*P}U.img=L,U.bpl=D,U.bpp=H}return{ctype:l,depth:d,plte:m,frames:v}},Xe.encode.framize=function(t,e,r,i,n,a){for(var s=[],o=0;o<t.length;o++){var h,f=new Uint8Array(t[o]),l=new Uint32Array(f.buffer),d=0,u=0,c=e,p=r,g=i?1:0;if(0!=o){for(var w=a||i||1==o||0!=s[o-2].dispose?1:2,_=0,v=1e9,b=0;b<w;b++){for(var m=new Uint8Array(t[o-1-b]),y=new Uint32Array(t[o-1-b]),k=e,x=r,A=-1,E=-1,I=0;I<r;I++)for(var z=0;z<e;z++){l[S=I*e+z]!=y[S]&&(z<k&&(k=z),z>A&&(A=z),I<x&&(x=I),I>E&&(E=I))}-1==A&&(k=x=A=E=0),n&&(1==(1&k)&&k--,1==(1&x)&&x--);var U=(A-k+1)*(E-x+1);U<v&&(v=U,_=b,d=k,u=x,c=A-k+1,p=E-x+1)}m=new Uint8Array(t[o-1-_]);1==_&&(s[o-1].dispose=2),h=new Uint8Array(c*p*4),Xe._copyTile(m,e,r,h,c,p,-d,-u,0),1==(g=Xe._copyTile(f,e,r,h,c,p,-d,-u,3)?1:0)?Xe.encode._prepareDiff(f,e,r,h,{x:d,y:u,width:c,height:p}):Xe._copyTile(f,e,r,h,c,p,-d,-u,0)}else h=f.slice(0);s.push({rect:{x:d,y:u,width:c,height:p},img:h,blend:g,dispose:0})}if(i)for(o=0;o<s.length;o++){if(1!=(C=s[o]).blend){var B=C.rect,P=s[o-1].rect,M=Math.min(B.x,P.x),T=Math.min(B.y,P.y),R={x:M,y:T,width:Math.max(B.x+B.width,P.x+P.width)-M,height:Math.max(B.y+B.height,P.y+P.height)-T};s[o-1].dispose=1,o-1!=0&&Xe.encode._updateFrame(t,e,r,s,o-1,R,n),Xe.encode._updateFrame(t,e,r,s,o,R,n)}}if(1!=t.length)for(var S=0;S<s.length;S++){var C;(C=s[S]).rect.width*C.rect.height}return s},Xe.encode._updateFrame=function(t,e,r,i,n,a,s){for(var o=Uint8Array,h=Uint32Array,f=new o(t[n-1]),l=new h(t[n-1]),d=n+1<t.length?new o(t[n+1]):null,u=new o(t[n]),c=new h(u.buffer),p=e,g=r,w=-1,_=-1,v=0;v<a.height;v++)for(var b=0;b<a.width;b++){var m=a.x+b,y=a.y+v,k=y*e+m,x=c[k];0==x||0==i[n-1].dispose&&l[k]==x&&(null==d||0!=d[4*k+3])||(m<p&&(p=m),m>w&&(w=m),y<g&&(g=y),y>_&&(_=y))}-1==w&&(p=g=w=_=0),s&&(1==(1&p)&&p--,1==(1&g)&&g--),a={x:p,y:g,width:w-p+1,height:_-g+1};var A=i[n];A.rect=a,A.blend=1,A.img=new Uint8Array(a.width*a.height*4),0==i[n-1].dispose?(Xe._copyTile(f,e,r,A.img,a.width,a.height,-a.x,-a.y,0),Xe.encode._prepareDiff(u,e,r,A.img,a)):Xe._copyTile(u,e,r,A.img,a.width,a.height,-a.x,-a.y,0)},Xe.encode._prepareDiff=function(t,e,r,i,n){Xe._copyTile(t,e,r,i,n.width,n.height,-n.x,-n.y,2)},Xe.encode._filterZero=function(t,e,r,i,n,a,s){var o,h=[],f=[0,1,2,3,4];-1!=a?f=[a]:(e*i>5e5||1==r)&&(f=[0]),s&&(o={level:0});for(var l=s&&null!=UZIP?UZIP:je,d=0;d<f.length;d++){for(var u=0;u<e;u++)Xe.encode._filterLine(n,t,u,i,r,f[d]);h.push(l.deflate(n,o))}var c,p=1e9;for(d=0;d<h.length;d++)h[d].length<p&&(c=d,p=h[d].length);return h[c]},Xe.encode._filterLine=function(t,e,r,i,n,a){var s=r*i,o=s+r,h=Xe.decode._paeth;if(t[o]=a,o++,0==a)if(i<500)for(var f=0;f<i;f++)t[o+f]=e[s+f];else t.set(new Uint8Array(e.buffer,s,i),o);else if(1==a){for(f=0;f<n;f++)t[o+f]=e[s+f];for(f=n;f<i;f++)t[o+f]=e[s+f]-e[s+f-n]+256&255}else if(0==r){for(f=0;f<n;f++)t[o+f]=e[s+f];if(2==a)for(f=n;f<i;f++)t[o+f]=e[s+f];if(3==a)for(f=n;f<i;f++)t[o+f]=e[s+f]-(e[s+f-n]>>1)+256&255;if(4==a)for(f=n;f<i;f++)t[o+f]=e[s+f]-h(e[s+f-n],0,0)+256&255}else{if(2==a)for(f=0;f<i;f++)t[o+f]=e[s+f]+256-e[s+f-i]&255;if(3==a){for(f=0;f<n;f++)t[o+f]=e[s+f]+256-(e[s+f-i]>>1)&255;for(f=n;f<i;f++)t[o+f]=e[s+f]+256-(e[s+f-i]+e[s+f-n]>>1)&255}if(4==a){for(f=0;f<n;f++)t[o+f]=e[s+f]+256-h(0,e[s+f-i],0)&255;for(f=n;f<i;f++)t[o+f]=e[s+f]+256-h(e[s+f-n],e[s+f-i],e[s+f-n-i])&255}}},Xe.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,i=0;i<8;i++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,i){for(var n=0;n<i;n++)t=Xe.crc.table[255&(t^e[r+n])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^Xe.crc.update(4294967295,t,e,r)}},Xe.quantize=function(t,e){var r=new Uint8Array(t),i=r.slice(0),n=new Uint32Array(i.buffer),a=Xe.quantize.getKDtree(i,e),s=a[0],o=a[1];Xe.quantize.planeDst;for(var h=r,f=n,l=h.length,d=new Uint8Array(r.length>>2),u=0;u<l;u+=4){var c=h[u]*(1/255),p=h[u+1]*(1/255),g=h[u+2]*(1/255),w=h[u+3]*(1/255),_=Xe.quantize.getNearest(s,c,p,g,w);d[u>>2]=_.ind,f[u>>2]=_.est.rgba}return{abuf:i.buffer,inds:d,plte:o}},Xe.quantize.getKDtree=function(t,e,r){null==r&&(r=1e-4);var i=new Uint32Array(t.buffer),n={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};n.bst=Xe.quantize.stats(t,n.i0,n.i1),n.est=Xe.quantize.estats(n.bst);for(var a=[n];a.length<e;){for(var s=0,o=0,h=0;h<a.length;h++)a[h].est.L>s&&(s=a[h].est.L,o=h);if(s<r)break;var f=a[o],l=Xe.quantize.splitPixels(t,i,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=l||f.i1<=l)f.est.L=0;else{var d={i0:f.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};d.bst=Xe.quantize.stats(t,d.i0,d.i1),d.est=Xe.quantize.estats(d.bst);var u={i0:l,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};u.bst={R:[],m:[],N:f.bst.N-d.bst.N};for(h=0;h<16;h++)u.bst.R[h]=f.bst.R[h]-d.bst.R[h];for(h=0;h<4;h++)u.bst.m[h]=f.bst.m[h]-d.bst.m[h];u.est=Xe.quantize.estats(u.bst),f.left=d,f.right=u,a[o]=d,a.push(u)}}a.sort((function(t,e){return e.bst.N-t.bst.N}));for(h=0;h<a.length;h++)a[h].ind=h;return[n,a]},Xe.quantize.getNearest=function(t,e,r,i,n){if(null==t.left)return t.tdst=Xe.quantize.dist(t.est.q,e,r,i,n),t;var a=Xe.quantize.planeDst(t.est,e,r,i,n),s=t.left,o=t.right;a>0&&(s=t.right,o=t.left);var h=Xe.quantize.getNearest(s,e,r,i,n);if(h.tdst<=a*a)return h;var f=Xe.quantize.getNearest(o,e,r,i,n);return f.tdst<h.tdst?f:h},Xe.quantize.planeDst=function(t,e,r,i,n){var a=t.e;return a[0]*e+a[1]*r+a[2]*i+a[3]*n-t.eMq},Xe.quantize.dist=function(t,e,r,i,n){var a=e-t[0],s=r-t[1],o=i-t[2],h=n-t[3];return a*a+s*s+o*o+h*h},Xe.quantize.splitPixels=function(t,e,r,i,n,a){var s=Xe.quantize.vecDot;for(i-=4;r<i;){for(;s(t,r,n)<=a;)r+=4;for(;s(t,i,n)>a;)i-=4;if(r>=i)break;var o=e[r>>2];e[r>>2]=e[i>>2],e[i>>2]=o,r+=4,i-=4}for(;s(t,r,n)>a;)r-=4;return r+4},Xe.quantize.vecDot=function(t,e,r){return t[e]*r[0]+t[e+1]*r[1]+t[e+2]*r[2]+t[e+3]*r[3]},Xe.quantize.stats=function(t,e,r){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0],a=r-e>>2,s=e;s<r;s+=4){var o=t[s]*(1/255),h=t[s+1]*(1/255),f=t[s+2]*(1/255),l=t[s+3]*(1/255);n[0]+=o,n[1]+=h,n[2]+=f,n[3]+=l,i[0]+=o*o,i[1]+=o*h,i[2]+=o*f,i[3]+=o*l,i[5]+=h*h,i[6]+=h*f,i[7]+=h*l,i[10]+=f*f,i[11]+=f*l,i[15]+=l*l}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:n,N:a}},Xe.quantize.estats=function(t){var e=t.R,r=t.m,i=t.N,n=r[0],a=r[1],s=r[2],o=r[3],h=0==i?0:1/i,f=[e[0]-n*n*h,e[1]-n*a*h,e[2]-n*s*h,e[3]-n*o*h,e[4]-a*n*h,e[5]-a*a*h,e[6]-a*s*h,e[7]-a*o*h,e[8]-s*n*h,e[9]-s*a*h,e[10]-s*s*h,e[11]-s*o*h,e[12]-o*n*h,e[13]-o*a*h,e[14]-o*s*h,e[15]-o*o*h],l=f,d=Xe.M4,u=[.5,.5,.5,.5],c=0,p=0;if(0!=i)for(var g=0;g<10&&(u=d.multVec(l,u),p=Math.sqrt(d.dot(u,u)),u=d.sml(1/p,u),!(Math.abs(p-c)<1e-9));g++)c=p;var w=[n*h,a*h,s*h,o*h];return{Cov:f,q:w,e:u,L:c,eMq255:d.dot(d.sml(255,w),u),eMq:d.dot(u,w),rgba:(Math.round(255*w[3])<<24|Math.round(255*w[2])<<16|Math.round(255*w[1])<<8|Math.round(255*w[0])<<0)>>>0}},Xe.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},Xe.encode.concatRGBA=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].byteLength;var i=new Uint8Array(e),n=0;for(r=0;r<t.length;r++){for(var a=new Uint8Array(t[r]),s=a.length,o=0;o<s;o+=4){var h=a[o],f=a[o+1],l=a[o+2],d=a[o+3];0==d&&(h=f=l=0),i[n+o]=h,i[n+o+1]=f,i[n+o+2]=l,i[n+o+3]=d}n+=s}return i.buffer};const Ye={decode(t){const e=Xe.decode(t);return{width:e.width,height:e.height,data:new Uint8Array(Xe.toRGBA8(e)[0])}},encode(t){const e=Xe.encode([t.data],t.width,t.height,0);return new Uint8Array(e)}};var We={256:"imageWidth",257:"imageLength",258:"bitsPerSample",259:"compression",262:"photometricInterpretation",273:"stripOffsets",278:"rowsPerStrip",279:"stripByteCounts",296:"resolutionUnit",320:"colorMap"};function Ke(t){var e=0,r=void 0,i={},n=void 0;function a(e,i){var n=e,a=e+i;if(r)return t.subarray(n,a);for(var s=t.subarray(n,a),o=new Uint8Array(a-n),h=0;h<s.byteLength;h++)o[s.byteLength-h-1]=s[h];return o}function s(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];if(r){var s=new DataView(t.buffer);if(i>1||n){for(var o=new Uint16Array(i),h=0;h<i;h++)o[h]=s.getUint16(e+(h<<1));return o}return s.getUint16(e)}var f=new DataView(a(e,i<<1).buffer);if(i>1||n){for(var l=new Uint16Array(i),d=0;d<i;d++)l[d]=f.getUint16(d<<1);return l}return f.getUint16(0)}function o(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];if(r){var s=new DataView(t.buffer);if(i>1||n){for(var o=new Uint32Array(i),h=0;h<i;h++)o[h]=s.getUint32(e+(h<<2));return o}return s.getUint32(e)}var f=new DataView(a(e,i<<2).buffer);if(i>1||n){for(var l=new Uint32Array(i),d=0;d<i;d++)l[d]=f.getUint32(d<<2);return l}return f.getUint32(0)}function h(t,e,n,a){var h=We[t];h&&(i[h]=function(t,e,i){var n=function(t,e){switch(t){case 1:return e;case 3:return e<<1;case 4:default:return e<<2;case 5:return e<<3}}(t,e),a=void 0;n>4&&(i=o(i)),a=n<4?4/n:e;var h=void 0;switch(t){case 1:break;case 3:h=s(i,a,!0);break;case 4:h=o(i,a,!0)}if(h)return n<4?r?h.slice(0,a-e):h.slice(a-e):h}(e,n,a))}function f(e){for(var r=new Uint8Array(e.stripByteCounts.reduce((function(t,e){return t+e}),0)),i=0,n=0;n<e.stripOffsets.length;n++){var a=t.subarray(e.stripOffsets[n],e.stripOffsets[n]+e.stripByteCounts[n]);r.set(a,i),i+=a.byteLength}return r}if(77===t[0]&&77===t[1])r=!0;else{if(73!==t[0]||73!==t[1])throw new Error("Invalid byte order "+t[0]+t[1]);r=!1}if(42!==a(2,2)[1])throw new Error("not tiff");for(var l=[],d=o(4);0!==d;d=o(e)){var u=s(e=d);i={},e+=2;for(var c=0;c<u;c++){h(s(e),s(e+=2),o(e+=2),e+=4),e+=4}n=f(i),l.push({stripData:n,ifdEntries:i})}return l}function Je(t,e){var r=t.colorMap,i=t.bitsPerSample,n=t.photometricInterpretation,a=void 0;if(e=function(t,e){var r=t.compression;if(r&&1!==r[0])throw 2===r[0]?new Error("CCITT group3 decompressionion is not implemented."):5===r[0]?new Error("LZW decompressionion is not implemented."):6===r[0]?new Error("JPEG decompressionion is not implemented."):7===r[0]?new Error("JPEG2 decompressionion is not implemented."):8===r[0]?new Error("Zip (Adove Deflate) decompressionion is not implemented."):32773===r[0]?new Error("Packbits decompression is not implemented."):new Error("Unknown compression type: "+r[0]);return e}(t,e),!i)throw new Error("Bilevel image decode is not implemented.");if(r)throw new Error("Palette-color image decode is not implemented.");if(n[0]=4===i.length)return e;if(n[0]=3===i.length){a=new Uint8Array(e.length/3*4);for(var s=0;s<e.length/3;s++)a[4*s]=e[3*s],a[4*s+1]=e[3*s+1],a[4*s+2]=e[3*s+2],a[4*s+3]=255;return a}if(n[0]<2&&1===i.length&&4===i[0]){a=new Uint8Array(4*e.length);for(var o=0;o<e.length;o++)a[4*o]=e[o]<<4,a[4*o+1]=e[o+1]<<4,a[4*o+2]=e[o+2]<<4,a[4*o+3]=255;return a}if(n[0]<2&&1===i.length&&8===i[0]){a=new Uint8Array(4*e.length);for(var h=0;h<e.length;h++)a[4*h]=e[h],a[4*h+1]=e[h+1],a[4*h+2]=e[h+2],a[4*h+3]=255;return a}throw new Error("Can't detect image type. PhotometricInterpretation: "+n[0]+", BitsPerSample: "+i)}var $e={decode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{singlePage:!0},r=Ke(new Uint8Array(t)),i=r.map((function(t){return{width:t.ifdEntries.imageWidth[0],height:t.ifdEntries.imageLength[0],data:Je(t.ifdEntries,t.stripData),ifdEntries:t.ifdEntries}}));if(e.singlePage){if(!i||!i.length)throw new Error("No pages");return i[0]}return i}};const Qe={decode(t){const e=$e.decode(t,{singlePage:!0});return{width:e.width,height:e.height,data:e.data}},encode(){throw new Error("Encoding is not supported for TIFF images!")}},tr={[exports.MimeType.JPEG]:L,[exports.MimeType.PNG]:Ye,[exports.MimeType.GIF]:P,[exports.MimeType.BMP]:g,[exports.MimeType.TIFF]:Qe},er=(t,e,r)=>{const i=[],n=[],a=[],s=[];for(let o=0;o<e*r;o++)i.push(t[4*o]),n.push(t[4*o+1]),a.push(t[4*o+2]),s.push(t[4*o+3]);return[i,n,a,s]},rr=(t,e,r,i,n,a)=>{ir(t,e,r,i,(a[0]-1)/2),ir(e,t,r,i,(a[1]-1)/2),ir(t,e,r,i,(a[2]-1)/2)},ir=(t,e,r,i,n)=>{for(let r=0;r<t.length;r++)e[r]=t[r];nr(e,t,r,i,n),ar(t,e,r,i,n)},nr=(t,e,r,i,n)=>{const a=1/(n+n+1);for(let s=0;s<i;s++){let i=s*r,o=i,h=i+n;const f=t[i],l=t[i+r-1];let d=(n+1)*f;for(let e=0;e<n;e++)d+=t[i+e];for(let r=0;r<=n;r++)d+=t[h++]-f,e[i++]=d*a;for(let s=n+1;s<r-n;s++)d+=t[h++]-t[o++],e[i++]=d*a;for(let s=r-n;s<r;s++)d+=l-t[o++],e[i++]=d*a}},ar=(t,e,r,i,n)=>{const a=1/(n+n+1);for(let s=0;s<r;s++){let o=s,h=o,f=o+n*r;const l=t[o],d=t[o+r*(i-1)];let u=(n+1)*l;for(let e=0;e<n;e++)u+=t[o+e*r];for(let i=0;i<=n;i++)u+=t[f]-l,e[o]=u*a,f+=r,o+=r;for(let s=n+1;s<i-n;s++)u+=t[f]-t[h],e[o]=u*a,h+=r,f+=r,o+=r;for(let s=i-n;s<i;s++)u+=d-t[h],e[o]=u*a,h+=r,o+=r}},sr=(t,e)=>{const r=er(t.data,t.width,t.height),i=er(t.data,t.width,t.height),n=((t,e)=>{const r=Math.sqrt(12*t*t/e+1);let i=Math.floor(r);i%2==0&&i--;const n=i+2,a=(12*t*t-e*i*i-4*e*i-3*e)/(-4*i-4),s=Math.round(a),o=[];for(let t=0;t<e;t++)o.push(t<s?i:n);return o})(e,3);rr(r[0],i[0],t.width,t.height,0,n),rr(r[1],i[1],t.width,t.height,0,n),rr(r[2],i[2],t.width,t.height,0,n),((t,e,r,i,n,a,s)=>{for(let o=0;o<e*r;o++)t[4*o]=i[o],t[4*o+1]=n[o],t[4*o+2]=a[o],t[4*o+3]=s[o]})(t.data,t.width,t.height,i[0],i[1],i[2],i[3])},or=(t,e)=>t<1?Math.round(t*e):t,hr={"center bottom":{horizontalPosition:"center",verticalPosition:"bottom"},"center center":{horizontalPosition:"center",verticalPosition:"center"},"center top":{horizontalPosition:"center",verticalPosition:"top"},"left bottom":{horizontalPosition:"left",verticalPosition:"bottom"},"left center":{horizontalPosition:"left",verticalPosition:"center"},"left top":{horizontalPosition:"left",verticalPosition:"top"},"right bottom":{horizontalPosition:"right",verticalPosition:"bottom"},"right center":{horizontalPosition:"right",verticalPosition:"center"},"right top":{horizontalPosition:"right",verticalPosition:"top"},bottom:{horizontalPosition:"center",verticalPosition:"bottom"},center:{horizontalPosition:"center",verticalPosition:"center"},left:{horizontalPosition:"left",verticalPosition:"center"},right:{horizontalPosition:"right",verticalPosition:"center"},top:{horizontalPosition:"center",verticalPosition:"top"}},fr=t=>hr[t]||hr.center,lr=(t,e,r,i,n)=>{if(r&&i){if("fill"===n||"contain"===n)return{frameWidth:r,frameHeight:i};if("inside"===n){const n=Math.min(r/t,i/e);return{frameWidth:Math.round(t*n),frameHeight:Math.round(e*n)}}if("outside"===n){const n=Math.max(r/t,i/e);return{frameWidth:Math.round(t*n),frameHeight:Math.round(e*n)}}}const a=t/e;return{frameWidth:r||Math.round(i*a),frameHeight:i||Math.round(r/a)}},dr=(t,e,r,i,n,a)=>{const s=t/e,o=r/i;let h=r,f=i,l=0,d=0;if("contain"===n||"cover"===n){"contain"===n?s>=o?f=r/s:h=i*s:"cover"===n&&(s<o?(h=r,f=r/s):(h=i*s,f=i));const{horizontalPosition:t,verticalPosition:e}=fr(a);"left"===t?l=0:"center"===t?l=r/2-h/2:"right"===t&&(l=r-h),"top"===e?d=0:"center"===e?d=i/2-f/2:"bottom"===e&&(d=i-f)}return{imageWidth:Math.round(h),imageHeight:Math.round(f),xOffset:Math.round(l),yOffset:Math.round(d)}},ur=(t,e,r,i,n)=>e===i?r:Math.round((t-e)*n+(i-t)*r),cr=(t,e,r,i,n,a,s,o,h,f)=>{const l=[0,0,0,0];for(let e=0;e<4;e+=1){let r=4*(o*t.width+n)+e,f=4*(o*t.width+a)+e;const d=ur(i,n,t.data[r],a,t.data[f]);if(h===o)l[e]=d;else{r=4*(h*t.width+n)+e,f=4*(h*t.width+a)+e;const u=ur(i,n,t.data[r],a,t.data[f]);l[e]=ur(s,o,d,h,u)}}l.every((t=>0===t))?e.set(f,r):e.set(l,r)},pr=(t,e)=>(r,i)=>({x:r+t,y:i+e}),gr=new Set([exports.MimeType.JPEG,exports.MimeType.PNG,exports.MimeType.GIF,exports.MimeType.BMP,exports.MimeType.TIFF]),wr=new Set([exports.MimeType.JPEG,exports.MimeType.PNG,exports.MimeType.GIF,exports.MimeType.BMP]);exports.default=class{#t;#e;outputOptions;constructor(t,e,r={}){let n={};if(null==e?(this.#e=i(t),n=r||{}):"string"==typeof e?(this.#e=e,n=r||{}):(this.#e=i(t),"object"!=typeof e||Array.isArray(e)||(n=e||{})),!gr.has(this.#e))throw new Error(`Unsupported input file type: ${this.#e}`);this.#t=tr[this.#e].decode(t),this.outputOptions={background:n.background??[0,0,0,0],quality:n.quality??80,compressionLevel:n.compressionLevel??9,loop:n.loop??0,delay:n.delay??100}}get width(){return this.#t.width}get height(){return this.#t.height}crop(t,e,r,i){return((t,e,r)=>{const i=or(e.x,t.width),n=or(e.y,t.height),a=or(e.width,t.width),s=or(e.height,t.height),o=new Uint8Array(a*s*4);for(let t=0;t<o.length;t+=4)o.set(r,t);const h=a-i,f=s-n;for(let e=0;e<f;e+=1){const r=(n+e)*t.width+i<<2,s=r+(h<<2),f=t.data.subarray(r,s),l=e*a<<2;o.set(f,l)}t.data=o,t.width=a,t.height=s})(this.#t,{x:t,y:e,width:r,height:i},this.outputOptions.background),this}resize(t,e=null,r={}){let i=null,n={};if(null==e?(i=null,n=r||{}):"number"==typeof e?(i=e,n=r||{}):(i=null,"object"!=typeof e||Array.isArray(e)||(n=e||{})),!t&&!i)throw new Error("At least one dimension must be provided!");return((t,e,r,i,n)=>{if(!e&&!r)throw new Error("At least one dimension must be provided!");const{frameWidth:a,frameHeight:s}=lr(t.width,t.height,e,r,i.fit),{imageWidth:o,imageHeight:h,xOffset:f,yOffset:l}=dr(t.width,t.height,a,s,i.fit,i.position),d=new Uint8Array(a*s*4);for(let t=0;t<d.length;t+=4)d.set(n,t);for(let e=0;e<h&&e+l<s;e+=1)for(let r=0;r<o&&r+f<a;r+=1){if(r+f<0||r+f>=a||e+l<0||e+l>=s)continue;const i=4*((e+l)*a+(r+f)),u=r*t.width/o,c=Math.floor(u),p=Math.min(Math.ceil(u),t.width-1),g=e*t.height/h,w=Math.floor(g),_=Math.min(Math.ceil(g),t.height-1);cr(t,d,i,u,c,p,g,w,_,n)}t.data=d,t.width=a,t.height=s})(this.#t,t,i,{fit:n.fit??"cover",position:n.position??"center"},this.outputOptions.background),this}flip(t){return((t,e)=>{if("horizontal"===e||"both"===e)for(let e=0;e<t.height;e+=1){const r=e*t.width;for(let e=0;e<t.width/2;e+=1){const i=r+e<<2,n=t.data.slice(i,i+4),a=r+(t.width-1-e)<<2,s=t.data.slice(a,a+4);t.data.set(n,a),t.data.set(s,i)}}if("vertical"===e||"both"===e)for(let e=0;e<t.width;e+=1)for(let r=0;r<t.height/2;r+=1){const i=r*t.width+e<<2,n=t.data.slice(i,i+4),a=(t.height-1-r)*t.width+e<<2,s=t.data.slice(a,a+4);t.data.set(n,a),t.data.set(s,i)}})(this.#t,t),this}rotate(t){return((t,e,r)=>{const i=e%360*Math.PI/180,n=Math.cos(i),a=Math.sin(i),s=new Uint8Array(t.data.length);for(let t=0;t<s.length;t+=4)s.set(r,t);const o=pr(-t.width/2,-t.height/2),h=pr(t.width/2+.5,t.height/2+.5);for(let e=1;e<=t.height;e++)for(let r=1;r<=t.width;r++){const i=o(r,e),f=h(n*i.x-a*i.y,n*i.y+a*i.x),l=t.width*(e-1)+r-1<<2;if(f.x>=0&&f.x<t.width&&f.y>=0&&f.y<t.height){const e=(t.width*(0|f.y)+f.x|0)<<2,r=t.data.subarray(e,e+4);s.set(r,l)}}t.data=s})(this.#t,t,this.outputOptions.background),this}blur(t){return sr(this.#t,t),this}toBuffer(t){const e=t||this.#e;if(!wr.has(e))throw new Error(`Unsupported output file type: ${e}`);return tr[e].encode(((t,e,r)=>{if(e===exports.MimeType.GIF){const e=t.data.slice(0),i=r.slice(0);i[3]=255;for(let t=0;t<e.length;t+=4)e[t+3]<128?e.set(i,t):e[t+3]=255;return{width:t.width,height:t.height,data:e}}if(e===exports.MimeType.JPEG){const e=t.data.slice(0);for(let t=3;t<e.length;t+=4)e[t]=255;return{width:t.width,height:t.height,data:e}}return t})(this.#t,e,this.outputOptions.background),this.outputOptions)}},exports.generatePalette=U,exports.getFrameDimensions=lr,exports.getImageDimensions=dr,exports.getPositions=fr,exports.mapImage=B,exports.rgbToHex=z,exports.supportedInputs=gr,exports.supportedOutputs=wr;
//# sourceMappingURL=index.cjs.map
